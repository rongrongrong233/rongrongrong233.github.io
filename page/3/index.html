<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/32x32-pandas.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/16x16-pandas.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.name","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="我们穿越长城">
<meta property="og:type" content="website">
<meta property="og:title" content="Sid Wu的小站">
<meta property="og:url" content="http://yoursite.name/page/3/index.html">
<meta property="og:site_name" content="Sid Wu的小站">
<meta property="og:description" content="我们穿越长城">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Sid Wu的小站">
<meta name="twitter:description" content="我们穿越长城">

<link rel="canonical" href="http://yoursite.name/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Sid Wu的小站</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Sid Wu的小站</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">点击「首页」查看文章列表，点击「标签」查看已有文章分类</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.name/2022/08/28/weka数据分析练习/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Sid Wu">
      <meta itemprop="description" content="我们穿越长城">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sid Wu的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/28/weka数据分析练习/" class="post-title-link" itemprop="url">weka数据分析练习</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-08-28 11:34:25 / 修改时间：11:48:34" itemprop="dateCreated datePublished" datetime="2022-08-28T11:34:25+08:00">2022-08-28</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong><em>这是数据分析课程的作业之一，使用了开源数据分析软件WEKA（WEKA的全名是怀卡托智能分析环境（Waikato Environment for Knowledge Analysis））</em></strong><br><strong><em>只是简单的使用</em></strong><br>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/08/28/weka数据分析练习/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.name/2022/08/28/交易成本与科斯定理/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Sid Wu">
      <meta itemprop="description" content="我们穿越长城">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sid Wu的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/28/交易成本与科斯定理/" class="post-title-link" itemprop="url">交易成本与科斯定理</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-08-28 11:03:30 / 修改时间：11:30:31" itemprop="dateCreated datePublished" datetime="2022-08-28T11:03:30+08:00">2022-08-28</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong><em>一切活动都要经过成本-收益的检验。本篇文章记录了经济学学习的一点心得体会</em></strong><br>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/08/28/交易成本与科斯定理/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.name/2022/08/28/法和经济学/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Sid Wu">
      <meta itemprop="description" content="我们穿越长城">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sid Wu的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/28/法和经济学/" class="post-title-link" itemprop="url">法和经济学</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-08-28 10:42:55 / 修改时间：11:04:01" itemprop="dateCreated datePublished" datetime="2022-08-28T10:42:55+08:00">2022-08-28</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong><em>本文是法和经济学课程学习的简要总结。企业利用信息系统管理时，要结合企业规章，进行有效率、经济的管理</em></strong><br>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/08/28/法和经济学/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.name/2022/08/28/国家标准加密算法介绍与实现[0]-前导知识/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Sid Wu">
      <meta itemprop="description" content="我们穿越长城">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sid Wu的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/28/国家标准加密算法介绍与实现[0]-前导知识/" class="post-title-link" itemprop="url">国家标准加密算法介绍与实现[0]-前导知识</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-08-28 09:20:27 / 修改时间：10:39:52" itemprop="dateCreated datePublished" datetime="2022-08-28T09:20:27+08:00">2022-08-28</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong><em>本文介绍国密算法的前置知识</em></strong><br><strong><em>由于公式较多，md渲染很成问题，待完善</em></strong><br>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/08/28/国家标准加密算法介绍与实现[0]-前导知识/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.name/2022/08/28/区块链在网络安全中的未来角色-基于区块链技术平台的防护与攻击可能性分析/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Sid Wu">
      <meta itemprop="description" content="我们穿越长城">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sid Wu的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/28/区块链在网络安全中的未来角色-基于区块链技术平台的防护与攻击可能性分析/" class="post-title-link" itemprop="url">区块链在网络安全中的未来角色-基于区块链技术平台的防护与攻击可能性分析</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-08-28 08:58:44 / 修改时间：10:37:50" itemprop="dateCreated datePublished" datetime="2022-08-28T08:58:44+08:00">2022-08-28</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>本文翻译自IEEE会议文章<em>Blockchain’s Future Role in Cybersecurity. Analysis of Defensive and Offensive Potential Leveraging Blockchain-Based Platforms</em>，参考文献请参考原文的引注</strong><br><strong>翻译时间2020年4月</strong><br>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/08/28/区块链在网络安全中的未来角色-基于区块链技术平台的防护与攻击可能性分析/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.name/2022/08/27/Oracle的imp-dmp工具/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Sid Wu">
      <meta itemprop="description" content="我们穿越长城">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sid Wu的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/27/Oracle的imp-dmp工具/" class="post-title-link" itemprop="url">Oracle的imp与dmp工具</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-27 12:53:00" itemprop="dateCreated datePublished" datetime="2022-08-27T12:53:00+08:00">2022-08-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-28 12:59:05" itemprop="dateModified" datetime="2022-08-28T12:59:05+08:00">2022-08-28</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><p>查看数据库版本、表空间情况</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span>  <span class="keyword">from</span> v$<span class="keyword">version</span>;</span><br><span class="line"><span class="keyword">select</span> tablespace_name ,<span class="keyword">sum</span>(<span class="keyword">bytes</span>) / <span class="number">1024</span> / <span class="number">1024</span> <span class="keyword">as</span> MB,<span class="keyword">sum</span>(<span class="keyword">bytes</span>) / <span class="number">1024</span> / <span class="number">1024</span> / <span class="number">1024</span> <span class="keyword">as</span> GB　<span class="keyword">from</span> dba_data_files <span class="keyword">group</span> <span class="keyword">by</span> tablespace_name;</span><br></pre></td></tr></table></figure>
<p>exp导出</p>
<blockquote>
<p>EXP SYSTEM/{password} BUFFER=64000 FILE=E:\DMP\FULL.DMP FULL=Y LOG=E:\DMP\FULL_EXP.LOG</p>
</blockquote>
<h2 id="EXP-IMP与EXPDP-IMPDP"><a href="#EXP-IMP与EXPDP-IMPDP" class="headerlink" title="EXP/IMP与EXPDP/IMPDP"></a>EXP/IMP与EXPDP/IMPDP</h2><blockquote>
<p>原文链接：<a href="https://blog.csdn.net/woaixiaoyu520/article/details/78260152" target="_blank" rel="noopener">https://blog.csdn.net/woaixiaoyu520/article/details/78260152</a></p>
<ol>
<li>EXP和IMP是客户端工具程序，它们既可以在客户端使用，也可以在服务端使用。</li>
<li>EXPDP和IMPDP是服务端的工具程序，他们只能在ORACLE服务端使用，不能在客户端使用。</li>
<li>IMP只适用于EXP导出的文件，不适用于EXPDP导出文件；IMPDP只适用于EXPDP导出的文件，而不适用于EXP导出文件。</li>
</ol>
</blockquote>
<h2 id="版本不同问题"><a href="#版本不同问题" class="headerlink" title="版本不同问题"></a>版本不同问题</h2><p>参考链接：<a href="https://www.cnblogs.com/lcword/p/11779206.html" target="_blank" rel="noopener">https://www.cnblogs.com/lcword/p/11779206.html</a></p>
<blockquote>
<ol>
<li><p>低版本的exp/imp可以连接到高版本（或同版本）的数据库服务器，但高版本的exp/imp不能连接到低版本的数据库服务器</p>
</li>
<li><p>高版本exp出的dmp文件，低版本无法imp（无法识别dmp文件）</p>
</li>
<li><p><strong>低版本exp出的dmp文件，高版本可以imp（向下兼容）</strong></p>
</li>
</ol>
</blockquote>
<h2 id="一些其他问题"><a href="#一些其他问题" class="headerlink" title="一些其他问题"></a>一些其他问题</h2><ol>
<li>exp提示数据是被保护的。常规路径只能导出部分表</li>
</ol>
<p>参考链接：<a href="https://blog.csdn.net/allway2/article/details/103506174：" target="_blank" rel="noopener">https://blog.csdn.net/allway2/article/details/103506174：</a><br>SQLPLUS中：</p>
<blockquote>
<p>grant exempt access policy to {username};</p>
</blockquote>
<h2 id="实际使用语句"><a href="#实际使用语句" class="headerlink" title="实际使用语句"></a>实际使用语句</h2><blockquote>
<p>alter session set “_ORACLE_SCRIPT”=true;</p>
<p>impdp system/{password} directory=expdp dumpfile=423full.dmp logfile=423full_imp.log remap_schema=admin:admin table_exists_action=replace exclude=grant</p>
<p>–导入<br>–来源 12c导入高版本，需要做一步操作<br>alter session set “_ORACLE_SCRIPT”=true;</p>
<p>impdp system/{password} directory=expdp dumpfile=423full.dmp logfile=423full_imp.log remap_schema=admin:admin table_exists_action=replace exclude=grant</p>
<p>–导出<br>create directory expdir as ‘E:\DMP’;</p>
<p>–授权<br>grant read,write on directory expdir to admin;<br>–导出表<br>expdp system/{password}@BI dumpfile=423full.dmp logfile=423full.log owner=(admin) directory=expdir</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.name/2022/08/27/Oracle的表、表空间、数据文件以及用户/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Sid Wu">
      <meta itemprop="description" content="我们穿越长城">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sid Wu的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/27/Oracle的表、表空间、数据文件以及用户/" class="post-title-link" itemprop="url">Oracle的表、表空间、数据文件以及用户</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-27 12:50:38" itemprop="dateCreated datePublished" datetime="2022-08-27T12:50:38+08:00">2022-08-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-28 12:58:58" itemprop="dateModified" datetime="2022-08-28T12:58:58+08:00">2022-08-28</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h2><p>参考学习：<a href="https://www.iteye.com/blog/yuwenlin-1882988" target="_blank" rel="noopener">https://www.iteye.com/blog/yuwenlin-1882988</a></p>
<p>数据库(database)、实例(instance)、用户(user)、表空间(table space)、表(table)的关系：</p>
<p>可以认为：</p>
<ol>
<li>一台机器只有一个<strong>数据库</strong>，但一个<strong>数据库</strong>可以有若干<strong>实例</strong></li>
<li>一个实例可以有若干<strong>用户</strong>，一个实例可以有若干<strong>表空间</strong></li>
<li>一个表空间下，可以有若干<strong>表</strong>，一个<strong>表空间</strong>可以有若干实际的<strong>数据文件(dbf/ora格式)</strong></li>
<li>一个<strong>表</strong>随机存储在一个或多个实际的<strong>数据文件(dbf/ora格式)</strong>中</li>
<li>不同用户可以在同一个表空间建立同一个名字的表</li>
</ol>
<h2 id="相关语句"><a href="#相关语句" class="headerlink" title="相关语句"></a>相关语句</h2><p>查询数据库物理文件的信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> v$<span class="keyword">datafile</span>;</span><br></pre></td></tr></table></figure>
<p>查询表空间名称与物理文件名称对应</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> tablespace_name,file_name <span class="keyword">from</span> dba_data_files;</span><br></pre></td></tr></table></figure>
<p>查看表空间使用情况</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">tablespace_name 表空间名,</span><br><span class="line"><span class="keyword">sum</span>(totalM) 总大小M,</span><br><span class="line"><span class="keyword">sum</span>(usedM) 已使用量M,</span><br><span class="line"><span class="keyword">sum</span>(surplusM) 剩余量M,</span><br><span class="line"><span class="keyword">sum</span>(usedM)/<span class="keyword">sum</span>(totalM)*<span class="number">100</span> 已使用率per</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">(</span><br><span class="line"><span class="keyword">SELECT</span> b.file_id <span class="keyword">ID</span>,</span><br><span class="line">b.tablespace_name tablespace_name ,</span><br><span class="line">b.file_name file_name,</span><br><span class="line">b.bytes/<span class="number">1024</span>/<span class="number">1024</span> totalM,</span><br><span class="line">(b.bytes-<span class="keyword">sum</span>(nvl(a.bytes,<span class="number">0</span>)))/<span class="number">1024</span>/<span class="number">1024</span> usedM,</span><br><span class="line"><span class="keyword">sum</span>(nvl(a.bytes,<span class="number">0</span>)/<span class="number">1024</span>/<span class="number">1024</span>) surplusM</span><br><span class="line"><span class="keyword">FROM</span> dba_free_space a,dba_data_files b</span><br><span class="line"><span class="keyword">WHERE</span> a.file_id = b.file_id</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> b.tablespace_name,b.file_name,b.file_id,b.bytes</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> b.tablespace_name</span><br><span class="line">)</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> tablespace_name ;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.name/2022/08/25/腾讯云服务器配置及部署ES系统/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Sid Wu">
      <meta itemprop="description" content="我们穿越长城">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sid Wu的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/25/腾讯云服务器配置及部署ES系统/" class="post-title-link" itemprop="url">腾讯云服务器配置及部署ES系统</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-08-25 17:44:53 / 修改时间：17:47:04" itemprop="dateCreated datePublished" datetime="2022-08-25T17:44:53+08:00">2022-08-25</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="0-写在前面"><a href="#0-写在前面" class="headerlink" title="0 写在前面"></a>0 写在前面</h2><p>本文介绍，在云服务器上安装Elaticsearch8 + Kibana8，并进行外网访问配置的全过程。主要介绍：</p>
<ol>
<li>购买、连接、部署云服务器</li>
<li>部署、配置Elaticsearch，进行连通测试</li>
<li>部署、配置Elaticsearch，进行连通测试</li>
</ol>
<p>其中，重点介绍不关闭ES8后自带的<code>xpack.security.enabled: true</code>配置，即使用https访问ES资源的配置方法。</p>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><table>
<thead>
<tr>
<th>项</th>
<th>版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>服务器类型</td>
<td>腾讯云轻量应用服务器，CPU 2核 - 内存 2GB - 系统盘 40GB</td>
</tr>
<tr>
<td>操作系统版本</td>
<td>Ubuntu Server 20.04 LTS 64bit</td>
</tr>
<tr>
<td>Elaticsearch</td>
<td>版本8.2.3, build_type为tar（官网下载的压缩包）</td>
</tr>
<tr>
<td>Kibana</td>
<td>版本8.2.3, build_type为tar（官网下载的压缩包）</td>
</tr>
<tr>
<td>其他有用工具</td>
<td>postman(相对于curl指令，我更习惯使用postman) <br> vscode(记录操作步骤、编写请求) <br> putty(远程连接服务器)</td>
</tr>
</tbody>
</table>
<p>说明：</p>
<ol>
<li><em>其他有用工具</em>不影响安装，个人使用习惯而已。</li>
<li>查阅问题时，请注意各项的版本。例如，由于我使用压缩包部署，所以不需要配置JDK等内容，而也因此。如果需要的话，各项系统变量都需要手动录入。</li>
</ol>
<p>主要参考书籍为：<br>赵建亭. 《Elasticsearch权威指南》 清华大学出版社<br>注意此书基于ES7，部分配置内容和ES8有所出入，供参考。</p>
<h3 id="碎碎念"><a href="#碎碎念" class="headerlink" title="碎碎念"></a>碎碎念</h3><p>不得不说，使用云服务器，不同于我之前在本地安装。当时在本地上，从下载完成，到我使用Kibana的dev tool，用时不超过30分钟。因为ES本身封装的已经很好了，努力在做开箱即用的配置。<br>我原以为云服务器就是操作稍微麻烦，就是没想到有如此多大大小小的坑。<br>期间，还要在充斥着无意义重复转载、内容农场、低能SEO，像垃圾堆一样的中文资料中查找有关信息，真是一个富有挑战性的，又恶心又有趣的体验。<br>希望我这篇文章能让阁下在垃圾堆里面少翻点。感谢网络上各位网友的无私分享，给我很大帮助。</p>
<h2 id="1-购买"><a href="#1-购买" class="headerlink" title="1 购买"></a>1 购买</h2><p>挑个合适的套餐即可，只要符合自身需求就行。这台服务器主要在云服务器运行ES系统，监控有关数据，向我发送信息，最基础配置已经满足我的需要。<br>系统方面，我选用的系统是ubuntu，主要用起来比较熟。win server 2012 R2我工作时用过，当时没给我留下好的印象，所以不使用。<br>价格方面，最基础也意味着最便宜。最便宜的服务器，新客的基础款轻量应用服务器60-70元一年，别的活动可能更低。</p>
<h2 id="2-服务器配置、连接"><a href="#2-服务器配置、连接" class="headerlink" title="2 服务器配置、连接"></a>2 服务器配置、连接</h2><h3 id="2-1-配置登录"><a href="#2-1-配置登录" class="headerlink" title="2.1 配置登录"></a>2.1 配置登录</h3><p>我比较习惯使用<strong>putty工具</strong>，只需要重置密码后，使用SSH登录即可。注意你的公网ip和内网ip都显示在控制台中，远程电脑登录时候使用公网ip。</p>
<h4 id="主要步骤"><a href="#主要步骤" class="headerlink" title="主要步骤"></a>主要步骤</h4><ol>
<li>使用控制台，服务器关机</li>
<li>点击远程登录中的重置密码，小本本记好密码，重置完成后开机</li>
<li>使用重制后的密码使用putty登录</li>
<li>成功标志为：能使用putty交互命令</li>
</ol>
<h4 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h4><ol>
<li>我一直使用非root用户登录。使用root用户虽然方便一些，但在工作中是十分危险的。</li>
<li>启动ES不可以使用root用户。</li>
</ol>
<h3 id="2-2-配置可视化桌面"><a href="#2-2-配置可视化桌面" class="headerlink" title="2.2 配置可视化桌面"></a>2.2 配置可视化桌面</h3><p>我需要登录服务器，使用浏览器进行某些可视化内容，所以要安装桌面，主要参照腾讯云文档：<br>（不得不说，有个官方文档还是很好的）</p>
<blockquote>
<p><a href="https://cloud.tencent.com/document/product/1207/54974" target="_blank" rel="noopener">https://cloud.tencent.com/document/product/1207/54974</a></p>
</blockquote>
<h4 id="主要步骤-1"><a href="#主要步骤-1" class="headerlink" title="主要步骤"></a>主要步骤</h4><ol>
<li>服务器安装gnome桌面及有关依赖的全家桶</li>
<li>服务器安装tightvncserver，并配置文件</li>
<li>使用控制台远程登录中的VNC登录</li>
<li>成功标志为：能看到GNOME桌面</li>
</ol>
<h4 id="注意-1"><a href="#注意-1" class="headerlink" title="注意"></a>注意</h4><ol>
<li>我没有使用下载的VNC Viewer客户端，而是直接使用了腾讯云服务器管理的<strong>控制台</strong>VNC登录。因为我的电脑上，VNC客户端似乎有网络配置的问题，我每次链接的时候都提示超时。使用网页端就正常，可以进去看到GNOME桌面。</li>
<li>注意使用gnome对内存影响还是比较大的，尤其对于轻量服务器更是大的负担。所以我需要在不用时，关闭GNOME桌面。</li>
</ol>
<h4 id="如何关闭桌面服务"><a href="#如何关闭桌面服务" class="headerlink" title="如何关闭桌面服务"></a>如何关闭桌面服务</h4><p>运行以下命令并重启</p>
<blockquote>
<p>sudo systemctl set-default multi-user</p>
</blockquote>
<p>运行完后，在控制台中重启服务器。</p>
<h3 id="2-3-配置防火墙"><a href="#2-3-配置防火墙" class="headerlink" title="2.3 配置防火墙"></a>2.3 配置防火墙</h3><p>我没有弄明白腾讯云防火墙与ubuntu防火墙的关系。似乎ubuntu上防火墙默认不开启，只需要在腾讯云控制台开启有关端口即可。<br>由于ES、Kibana的默认端口为<strong>5601和9200</strong>，公网访问，需要手动放行。</p>
<h4 id="主要步骤-2"><a href="#主要步骤-2" class="headerlink" title="主要步骤"></a>主要步骤</h4><ol>
<li>进入控制台的防火墙界面</li>
<li>添加规则</li>
<li>端口号填写<code>5601,9200</code>，其余选项默认，确定保存规则即可</li>
</ol>
<h2 id="3-安装ES并公网访问"><a href="#3-安装ES并公网访问" class="headerlink" title="3 安装ES并公网访问"></a>3 安装ES并公网访问</h2><p><strong>请注意，本文重点介绍不关闭ES8自带的<code>xpack.security.enabled: true</code>配置，即使用https访问ES资源的配置方法。如果关闭自带此配置，有可能会简便很多。</strong><br>如果只需要看配置SSL部分，请直接转<strong>3.2 具体配置</strong>一节   </p>
<h3 id="3-1-下载安装"><a href="#3-1-下载安装" class="headerlink" title="3.1 下载安装"></a>3.1 下载安装</h3><ol>
<li>下载解压包<br>访问<a href="https://www.elastic.co/cn/downloads/elasticsearch" target="_blank" rel="noopener">Elasticreach官网</a>下载即可。注意目前(2022年8月20日)，最新版是8.3.3，而我下载的版本是8.2.3，要去以往发行版下载。类型选择<code>LINUX X86_64</code></li>
</ol>
<p>我没有使用常用的<code>apt</code>方式安装，因为腾讯云服务器的Ubuntu已经配置腾讯云软件源镜像（访问下载速度很快），但我不会如何下载我想要的版本。</p>
<p>下载完成后，使用<code>unzip</code>解压缩包就可使用了。</p>
<ol start="2">
<li>配置<br>配置以下几个东西，具体方式可以后看<strong>3.2 具体配置</strong>一节：</li>
</ol>
<ul>
<li>公网访问。即修改Elasticsearch.yml文件的networkhost ：0.0.0.0 以增加公网访问</li>
<li>JVM内存分配。即修改configs/jvm.options参数</li>
<li>更改一个进程能拥有的最大内存区域限制。即修改/etc/sysctl.conf文件</li>
<li>Kibana访问。即修改Elasticsearch.yml文件，增加http.cors的跨域访问配置</li>
<li><strong>重新生成CA和证书</strong></li>
</ul>
<p><strong>前三项</strong>配置完，就可以服务器启动服务，服务器和公网访问ES服务了，后两项主要是针对Kibana的配置。</p>
<h3 id="3-2-具体配置"><a href="#3-2-具体配置" class="headerlink" title="3.2 具体配置"></a>3.2 具体配置</h3><p>绝大多数ES有关的配置，配置都发生在ES解压后的文件夹下。以下提到的bin/和config/，都是Elasticsearch下的文件夹。进行配置时，应停止ES服务。ES服务运行时，不会实时加载配置。（除了安全配置信息）</p>
<h4 id="3-2-1-公网访问"><a href="#3-2-1-公网访问" class="headerlink" title="3.2.1 公网访问"></a>3.2.1 公网访问</h4><p>切换到config文件夹</p>
<blockquote>
<p>cd config/</p>
</blockquote>
<p>编辑配置文件elasticsearch.yml</p>
<blockquote>
<p>vi elasticsearch.yml</p>
</blockquote>
<p>找到默认注释的networkhost，增加配置项并保存</p>
<blockquote>
<p>networkhost ：0.0.0.0</p>
</blockquote>
<h4 id="3-2-2-JVM内存分配"><a href="#3-2-2-JVM内存分配" class="headerlink" title="3.2.2 JVM内存分配"></a>3.2.2 JVM内存分配</h4><p>（此步骤针对内存较小的服务器。如果服务器内存满足JVM默认配置，没发生3.5节常见问题1，是不必配置的）<br>切换到config文件夹</p>
<blockquote>
<p>cd config/</p>
</blockquote>
<p>编辑配置文件jvm.options</p>
<blockquote>
<p>vi jvm.options</p>
</blockquote>
<p>修改以下参数并保存。<br>原来的两个参数：</p>
<blockquote>
<p>-Xms4g<br>-Xmx4g</p>
</blockquote>
<p>改后的参数</p>
<blockquote>
<p>-Xms512M<br>-Xmx512M</p>
</blockquote>
<h4 id="3-2-3-内存区域限制"><a href="#3-2-3-内存区域限制" class="headerlink" title="3.2.3 内存区域限制"></a>3.2.3 内存区域限制</h4><p>（这个内存区域限制，是<strong>ubuntu系统</strong>的限制）<br>运行命令</p>
<blockquote>
<p>sudo sysctl -w vm.max_map_count=262144</p>
</blockquote>
<p>切换到etc/下的文件，查看是否有此修改</p>
<blockquote>
<p>sudo vi /etc/sysctl.conf</p>
</blockquote>
<p>以下内容有的话不用处理，没有的话增加配置</p>
<blockquote>
<p>vm.max_map_count=262144</p>
</blockquote>
<h4 id="3-2-4-Kibana访问"><a href="#3-2-4-Kibana访问" class="headerlink" title="3.2.4 Kibana访问"></a>3.2.4 Kibana访问</h4><p>切换到config文件夹</p>
<blockquote>
<p>cd config/</p>
</blockquote>
<p>编辑配置文件elasticsearch.yml</p>
<blockquote>
<p>vi elasticsearch.yml</p>
</blockquote>
<p>增加如下配置并保存<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">http.cors.enabled:</span> <span class="literal">true</span></span><br><span class="line"><span class="string">http.cors.allow-origin:</span> <span class="string">"*"</span></span><br></pre></td></tr></table></figure></p>
<h4 id="3-2-5-重新生成CA和证书"><a href="#3-2-5-重新生成CA和证书" class="headerlink" title="3.2.5 重新生成CA和证书"></a>3.2.5 <strong>重新生成CA和证书</strong></h4><p>这个配置对于Kibana很重要，过程比较长，耐心去做。生成的CA、证书对、密钥等都可以反复生成，覆盖之前的配置，多进行尝试就会成功。<br>建议有条件的直接去看官方文档，我会基于官方文档进行我的操作记录：<br><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/security-basic-setup.html" target="_blank" rel="noopener">官方文档：生成CA、P12证书并配置</a><br><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/security-basic-setup-https.html" target="_blank" rel="noopener">官方文档：生成PEM证书并配置</a><br>这位网友写的简略些，但也可以做参考:<br><a href="https://cloud.tencent.com/developer/article/1973195" target="_blank" rel="noopener">云服务器 Centos7 部署 Elasticsearch 8.0 + Kibana 8.0 指南</a></p>
<p>以下是正式步骤：</p>
<h5 id="Ⅰ-生成CA"><a href="#Ⅰ-生成CA" class="headerlink" title="Ⅰ 生成CA"></a>Ⅰ 生成CA</h5><p>切换到bin/下，运行：</p>
<blockquote>
<p>/elasticsearch-certutil ca</p>
</blockquote>
<p>注意：</p>
<ol>
<li>输入完命令后进入交互模式，CA是可以自己命名的。建议重命名，和原本的CA区分。</li>
<li>生成的CA文件在文件夹根目录（bin/的上一级），后面配置时要用到。</li>
<li>虽然空密码也可以，但是建议使用密码.</li>
</ol>
<h5 id="Ⅱ-生成P12文件"><a href="#Ⅱ-生成P12文件" class="headerlink" title="Ⅱ 生成P12文件"></a>Ⅱ 生成P12文件</h5><p>切换到bin/下，运行：</p>
<blockquote>
<p>/elasticsearch-certutil cert –ca elastic-stack-ca.p12</p>
</blockquote>
<p>注意:</p>
<ol>
<li>此步的<code>elastic-stack-ca.p12</code>是默认输出P12文件的名称，可以修改成自己需要输出的文件名称，不加<code>.p12</code>也是没问题的。</li>
<li>生成的P12文件在ES文件夹config/目录，后面配置elasticsearch.yml要用到。</li>
<li>虽然空密码也可以，但是建议使用密码.</li>
</ol>
<h5 id="Ⅲ-修改ES安全配置"><a href="#Ⅲ-修改ES安全配置" class="headerlink" title="Ⅲ 修改ES安全配置"></a>Ⅲ 修改ES安全配置</h5><p>切换到config文件夹</p>
<blockquote>
<p>cd config/</p>
</blockquote>
<p>编辑配置文件elasticsearch.yml</p>
<blockquote>
<p>vi elasticsearch.yml</p>
</blockquote>
<p>注意修改配置文件的以下节：<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">xpack.security.transport.ssl:</span></span><br><span class="line"><span class="attr">    enabled:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">    verification_mode:</span> <span class="string">certificate</span></span><br><span class="line">    <span class="string">keystore.path:</span> <span class="string">&#123;P12文件&#125;</span></span><br><span class="line">    <span class="string">truststore.path:</span> <span class="string">&#123;P12文件&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>注意：</p>
<ol>
<li>如果你没有像我重新命名生成的p12文件，保持原样即可。因为默认名称生成的P12文件覆盖掉了原来的文件。</li>
</ol>
<h5 id="Ⅳ-刷新密钥"><a href="#Ⅳ-刷新密钥" class="headerlink" title="Ⅳ 刷新密钥"></a>Ⅳ 刷新密钥</h5><p>切换到bin/下，运行：</p>
<blockquote>
<p>./elasticsearch-keystore add xpack.security.transport.ssl.keystore.secure_password</p>
</blockquote>
<blockquote>
<p>./elasticsearch-keystore add xpack.security.transport.ssl.truststore.secure_password</p>
</blockquote>
<p>会提示原来已经有密钥，覆盖即可。</p>
<h5 id="Ⅴ-生成https证书压缩包"><a href="#Ⅴ-生成https证书压缩包" class="headerlink" title="Ⅴ 生成https证书压缩包"></a>Ⅴ 生成https证书压缩包</h5><p>这一步骤的目标是生成一个包含ES、Kibana各自证书的压缩包<code>elasticsearch-ssl-http.zip</code>。<br><strong>以下步骤是我根据自身情况，在此基础上做了部分修改。如果情况与我不同，要以官方文档为准。</strong><br><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/security-basic-setup-https.html" target="_blank" rel="noopener">官方文档：生成PEM证书并配置</a><br>我的场景：<strong>没有域名、负载均衡</strong>等服务器，ES为单节点的集群。公网访问时，直接以<strong>http + ip</strong>方式访问Kibana服务。Kibana以<strong>https</strong>方式访问ES资源。</p>
<p>step1. 切换到bin/下，运行：</p>
<blockquote>
<p>./elasticsearch-certutil http</p>
</blockquote>
<p>然后一步一步来，以下是官网的一个例子，我补充了我配置的内容：</p>
<ol>
<li>When asked if you want to generate a CSR, enter n.<br>是否生成CSR，输入<strong>n</strong></li>
<li>When asked if you want to use an existing CA, enter y.<br>是否使用已有CA，输入<strong>y</strong></li>
<li>Enter the path to your CA. This is the absolute path to the elastic-stack-ca.p12 file that you generated for your cluster.<br>CA文件的绝对路径。官网的这个提示输入P12文件路径似乎有问题，我输入<strong>第Ⅰ步中CA</strong>的CA文件路径才正常。<blockquote>
<p>/home/ubuntu/ESStack/elasticsearch-8.2.3/{CA名称}</p>
</blockquote>
</li>
<li>Enter the password for your CA.<br><strong>第Ⅰ步中CA</strong>的密码。</li>
<li>Enter an expiration value for your certificate. You can enter the validity period in years, months, or days. For example, enter 90D for 90 days.<br>默认生效时间5年，<strong>回车即可</strong></li>
<li>When asked if you want to generate one certificate per node, enter y.<br>输入y<br>Each certificate will have its own private key, and will be issued for a specific hostname or IP address.<br>When prompted, enter the name of the first node in your cluster. Use the same node name that you used when generating node certificates.<br>输入节点名称，跟生成CA时用的节点应该是一致的。我没有修改节点名称，那么默认节点名称是 <strong>node-1</strong></li>
<li>Enter all hostnames used to connect to your first node. These hostnames will be added as DNS names in the Subject Alternative Name (SAN) field in your certificate.<br>List every hostname and variant used to connect to your cluster over HTTPS.<br>我没有主机、域名的问题，<strong>直接回车</strong></li>
<li>Enter the IP addresses that clients can use to connect to your node.<br>注意此步很重要。我输入了服务器的<strong>公网ip + 内网ip</strong>，是可行的</li>
<li>Repeat these steps for each additional node in your cluster.<br>它会确认以上信息是否输入正确，不正确的话重来一次。还会询问是否再生成额外的证书，拒绝即可。</li>
</ol>
<p>以上步骤完成，会自动在文件夹根目录（<code>bin/</code>的上一级）生成压缩包<code>elasticsearch-ssl-http.zip</code>。其包含两个文件夹，里面的结构如下：</p>
<blockquote>
<p>/elasticsearch<br>|_ README.txt<br>|_ http.p12<br>|_ sample-elasticsearch.yml</p>
</blockquote>
<blockquote>
<p>/kibana<br>|_ README.txt<br>|_ elasticsearch-ca.pem<br>|_ sample-kibana.yml</p>
</blockquote>
<p>step2. 将此压缩包解压缩，把<code>http.p12</code>文件移动到<code>config/certs</code>下，覆盖原文件<br>注：如果你需要改到别的位置，修改elasticsearch.yml的此节：<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">xpack.security.http.ssl:</span></span><br><span class="line"><span class="attr">    enabled:</span> <span class="literal">true</span></span><br><span class="line">    <span class="string">keystore.path:</span> <span class="string">certs/http.p12</span></span><br></pre></td></tr></table></figure></p>
<p>step3. 切换到<code>bin/</code>，运行以刷新密钥：</p>
<blockquote>
<p>./elasticsearch-keystore add xpack.security.http.ssl.keystore.secure_password</p>
</blockquote>
<p>注意和<strong>第Ⅳ步的命令</strong>不同</p>
<h5 id="Ⅵ-配置Kibana的安全配置"><a href="#Ⅵ-配置Kibana的安全配置" class="headerlink" title="Ⅵ 配置Kibana的安全配置"></a>Ⅵ 配置Kibana的安全配置</h5><p>此步骤是针对于<strong>Kibana</strong>来配置的，不需要配置Kibana的话可以跳过。放在3.2下，只是为了操作流畅。<br>以上所有<code>bin/</code>和<code>config/</code>都是<code>elasticsearch-8.2.3</code>文件夹下的。<br>以下所有<code>bin/</code>和<code>config/</code>都是<code>kibana-8.2.3</code>文件夹下的。</p>
<p>step1. 修改<code>kibana.yml</code>的配置，主要修改或者增加：</p>
<ol>
<li><p>elasticsearch.hosts<br>这个默认是http访问，要变成https，并加上公网ip（大括号不用输入）</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">elasticsearch.hosts:</span> <span class="string">["https://&#123;云服务器公网ip&#125;:9200"]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>用户名/密码<br>这个配置有多种选择，似乎token也可以，我选择了用户名/密码的方式。注意用户不可以使用<code>elastic</code>用户，推荐使用<code>kibana_system</code>用户。如果不清楚<code>kibana_system</code>的密码，就去重置。</p>
</li>
</ol>
<p>重置方式：切到ES的bin/下，运行：</p>
<blockquote>
<p>./elasticsearch-reset-password -u kibana_system</p>
</blockquote>
<p>然后用获取到的用户名/密码进行配置<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">elasticsearch.username:</span> <span class="string">"kibana_system"</span></span><br><span class="line"><span class="string">elasticsearch.password:</span> <span class="string">&#123;重置后的密钥&#125;</span></span><br></pre></td></tr></table></figure></p>
<ol start="3">
<li>elasticsearch.ssl.certificateAuthorities<br>这步就是用<strong>第Ⅴ步</strong>得到的Kibana文件夹里面的pem文件进行配置。<blockquote>
<p>/kibana<br>|_ README.txt<br>|_ elasticsearch-ca.pem<br>|_ sample-kibana.yml</p>
</blockquote>
</li>
</ol>
<p>配置前，要把elasticsearch-ca.pem放置到合适的路径。我放置在了<code>config/</code>下。<br>我这里有点问题，如果像<code>sample-kibana.yml</code>使用相对路径，会在Kibana启动时无法读取。因此，我使用绝对路径，配置如下：<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">elasticsearch.ssl.certificateAuthorities:</span> <span class="string">["/home/ubuntu/ESStack/kibana-8.2.3/config/elasticsearch-ca.pem"]</span></span><br></pre></td></tr></table></figure></p>
<h3 id="3-3-连通测试"><a href="#3-3-连通测试" class="headerlink" title="3.3 连通测试"></a>3.3 连通测试</h3><p>cd到bin/下，运行<code>./elasticsearch</code>即可启动ES服务</p>
<h4 id="连通ES：方式一-curl命令"><a href="#连通ES：方式一-curl命令" class="headerlink" title="连通ES：方式一 curl命令"></a>连通ES：方式一 curl命令</h4><p>使用curl命令（大括号不用输入）</p>
<blockquote>
<p>curl -k -i -XGET “https://{云服务器公网ip}:9200” –user {用户名称}:{用户密码}</p>
</blockquote>
<p>返回HTTP/200即连通成功。</p>
<p>（顺带一提，我至今没搞懂win10上powershell怎么使用curl，只能用cmd，也是够神必的。）</p>
<h4 id="连通ES：方式二-postman"><a href="#连通ES：方式二-postman" class="headerlink" title="连通ES：方式二 postman"></a>连通ES：方式二 postman</h4><ol>
<li><p>新建HTTP request，使用<strong>GET</strong>，url输入（大括号不用输入）：</p>
<blockquote>
<p>https://{云服务器公网ip}:9200</p>
</blockquote>
</li>
<li><p>进入Authorization，选取<strong>Basic Auth</strong>，右侧Username和Password输入用户名称、用户密码</p>
</li>
<li>点击Send，Body部分正确返回内容即成功</li>
</ol>
<h3 id="3-4-常用操作"><a href="#3-4-常用操作" class="headerlink" title="3.4 常用操作"></a>3.4 常用操作</h3><h4 id="重置ES用户密码"><a href="#重置ES用户密码" class="headerlink" title="重置ES用户密码"></a>重置ES用户密码</h4><p>切到ES的bin/下，运行：</p>
<blockquote>
<p>./elasticsearch-reset-password -u elastic</p>
</blockquote>
<p>这样重置了<code>elastic</code>这个用户的密码，其他用户同理。</p>
<h4 id="撤销解压操作"><a href="#撤销解压操作" class="headerlink" title="撤销解压操作"></a>撤销解压操作</h4><p>解压缩可能出现忘记输入解压输出路径的情况。解压ES压缩包和解压http密钥对都有可能出问题。只需要运行以下命令：</p>
<blockquote>
<p>zipinfo -1 ./{zip文件名称}| xargs rm -rf</p>
</blockquote>
<h4 id="关闭ES进程"><a href="#关闭ES进程" class="headerlink" title="关闭ES进程"></a>关闭ES进程</h4><p>出于各种原因，可能存在putty断开连接但是ES进程仍旧继续的情况。若需要手动结束的话，需要：<br>找到pid</p>
<blockquote>
<p>ps -ef | grep elastic</p>
</blockquote>
<p>结束进程（大括号不用输入）</p>
<blockquote>
<p>kill -9 {pid}</p>
</blockquote>
<h3 id="3-5-常见问题"><a href="#3-5-常见问题" class="headerlink" title="3.5 常见问题"></a>3.5 常见问题</h3><ol>
<li>问题：进程会自动killed，且不打印日志<br>原因：原因是内存太低，JVM受不鸟了。3.2.2节已有配置方案。需要去<code>configs/jvm.options</code>里面修改以下两个参数：<blockquote>
<p>-Xms4g<br>-Xmx4g</p>
</blockquote>
</li>
</ol>
<p>我改成了</p>
<blockquote>
<p>-Xms512M<br>-Xmx512M</p>
</blockquote>
<ol start="2">
<li>问题：ES无法启动，日志提示内存问题，具体如下：<blockquote>
<p><em>max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]</em></p>
</blockquote>
</li>
</ol>
<p>原因是系统默认的进程内存区限制不满足ES要求，要手动更改，3.2.3节已有配置方案。<br>要在服务器执行：</p>
<blockquote>
<p>sudo sysctl -w vm.max_map_count=262144</p>
</blockquote>
<p>执行后，并修改/etc/sysctl.conf文件，末尾添加或者修改</p>
<blockquote>
<p>vm.max_map_count=262144</p>
</blockquote>
<p>注意，执行完sudo命令之后，一般已经有此配置了，不必重复配置。</p>
<h2 id="4-安装Kibana并公网访问"><a href="#4-安装Kibana并公网访问" class="headerlink" title="4 安装Kibana并公网访问"></a>4 安装Kibana并公网访问</h2><h3 id="4-1-下载安装"><a href="#4-1-下载安装" class="headerlink" title="4.1 下载安装"></a>4.1 下载安装</h3><ol>
<li>下载解压包<br>访问<a href="https://www.elastic.co/cn/downloads/past-releases/kibana-8-2-3" target="_blank" rel="noopener">Elasticreach官网</a>下载即可。注意目前(2022年8月20日)，最新版是8.3.3，而我下载的版本是8.2.3，要去以往发行版下载。类型选择<code>LINUX X86_64</code></li>
</ol>
<p>我没有使用常用的<code>apt</code>方式安装，因为腾讯云服务器的Ubuntu已经配置腾讯云软件源镜像（访问下载速度很快），但我不会如何下载我想要的版本。</p>
<p>下载完成后，使用<code>unzip</code>解压缩包就可使用了。</p>
<ol start="2">
<li>配置<br>配置以下几个东西，具体方式可以后看<strong>4.2 具体配置</strong>一节：</li>
</ol>
<ul>
<li>Kibana的公网访问。即修改Kibana.yml文件，增加server.host: “0.0.0.0”</li>
<li><strong>重新生成CA和证书</strong></li>
</ul>
<h3 id="4-2-具体配置"><a href="#4-2-具体配置" class="headerlink" title="4.2 具体配置"></a>4.2 具体配置</h3><h4 id="4-2-1-公网访问"><a href="#4-2-1-公网访问" class="headerlink" title="4.2.1 公网访问"></a>4.2.1 公网访问</h4><p>切换到config文件夹</p>
<blockquote>
<p>cd config/</p>
</blockquote>
<p>编辑配置文件<code>kibana.yml</code></p>
<blockquote>
<p>vi kibana.yml</p>
</blockquote>
<p>找到默认注释的server.host，增加配置项并保存</p>
<blockquote>
<p>server.host: “0.0.0.0”</p>
</blockquote>
<h4 id="4-2-2-重新生成CA和证书"><a href="#4-2-2-重新生成CA和证书" class="headerlink" title="4.2.2 重新生成CA和证书"></a>4.2.2 <strong>重新生成CA和证书</strong></h4><p>和<code>3.2.5配置</code>没有任何区别。涉及Kibana部分，就是<code>3.2.5配置</code>的<strong>Ⅵ 配置Kibana的安全配置</strong>部分</p>
<h3 id="4-3-连通测试"><a href="#4-3-连通测试" class="headerlink" title="4.3 连通测试"></a>4.3 连通测试</h3><p>cd到bin/下，运行<code>./kibana</code>即可启动Kibana服务</p>
<h4 id="连通Kibana：浏览器"><a href="#连通Kibana：浏览器" class="headerlink" title="连通Kibana：浏览器"></a>连通Kibana：浏览器</h4><p>在本地浏览器访问以下URL（大括号不用输入）</p>
<blockquote>
<p>http://{云服务器公网ip}:5601/login?next=%2F</p>
</blockquote>
<p>能看到登录界面，能登录到Kibana连通成功。登陆时可以使用<code>elastic</code>用户</p>
<h3 id="4-4-常见问题"><a href="#4-4-常见问题" class="headerlink" title="4.4 常见问题"></a>4.4 常见问题</h3><ol>
<li>kibana无法启动，运行时提示</li>
</ol>
<blockquote>
<p>[error]Unable to retrieve version information……<strong>self signed certificates</strong></p>
</blockquote>
<p>需要配置kibana.yml和elasticsearch.yml的SSL，可以看<code>3.2.5配置</code></p>
<ol start="2">
<li>重新生成Kibana令牌</li>
</ol>
<p>在第一次启动ES时，ES会显示elastic用户的密码和有效期为30分钟的，Kibana的令牌。令牌的作用是：<br><strong>如果你没有像我这样配置，而是选择直接以默认配置方式启动ES、Kibana的话，启动完Kibana会提示你用浏览器访问指定地址，输入令牌，完成ES和Kibana的绑定。</strong><br>如果某些原因导致令牌失效，以下方式重新生成令牌：<br>切换到ES文件夹的<code>bin/</code>下</p>
<blockquote>
<p>cd /bin</p>
</blockquote>
<p>运行命令</p>
<blockquote>
<p>./elasticsearch-create-enrollment-token -s kibana</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.name/2022/05/03/使用VirtualBox安装macOS-Catalina-10-15-5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Sid Wu">
      <meta itemprop="description" content="我们穿越长城">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sid Wu的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/03/使用VirtualBox安装macOS-Catalina-10-15-5/" class="post-title-link" itemprop="url">使用VirtualBox安装macOS Catalina 10.15.5</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-05-03 21:34:02" itemprop="dateCreated datePublished" datetime="2022-05-03T21:34:02+08:00">2022-05-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-24 16:37:06" itemprop="dateModified" datetime="2022-08-24T16:37:06+08:00">2022-08-24</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <meta name="referrer" content="no-referrer">

<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="https://www.wikigain.com/install-macos-catalina-on-virtualbox-on-windows/" target="_blank" rel="noopener">https://www.wikigain.com/install-macos-catalina-on-virtualbox-on-windows/</a></p>
<p>（这个非常全，假如当时我第一次看的是这个，就不会走那么多弯路了）</p>
<p><a href="https://zhuanlan.zhihu.com/p/47707748" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/47707748</a></p>
<p><a href="https://www.wikigain.com/install-macos-sierra-10-12-virtualbox/" target="_blank" rel="noopener">https://www.wikigain.com/install-macos-sierra-10-12-virtualbox/</a></p>
<h2 id="准备阶段"><a href="#准备阶段" class="headerlink" title="准备阶段"></a>准备阶段</h2><h3 id="1-mac系统镜像文件"><a href="#1-mac系统镜像文件" class="headerlink" title="1.mac系统镜像文件"></a>1.mac系统镜像文件</h3><p>我是用的是<code>macOS Catalina 10.15.5 (19F101)</code>的ISO文件。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/28045466-19d7e93465e12a3b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="2-virtual-box及拓展组件"><a href="#2-virtual-box及拓展组件" class="headerlink" title="2.virtual box及拓展组件"></a>2.virtual box及拓展组件</h3><ul>
<li><p>能打开virtual box就算成功，演示使用版本6.1</p>
</li>
<li><p>安装拓展，成功后如下图所示。具体安装方法看参考资料第一个链接。</p>
</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/28045466-83b0a3594ec2e1e8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="3-足够大的硬盘空间"><a href="#3-足够大的硬盘空间" class="headerlink" title="3.足够大的硬盘空间"></a>3.足够大的硬盘空间</h3><h2 id="新建虚拟电脑"><a href="#新建虚拟电脑" class="headerlink" title="新建虚拟电脑"></a>新建虚拟电脑</h2><p>使用virtual box， 新建一个虚拟电脑配置。若使用ISO文件，则需要手动创建虚拟硬盘。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/28045466-965b7ed2117658d6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>然后进入虚拟硬盘的配置环节，如图配置好并点击创建，等待创建完成。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/28045466-abdeed10aacfe2db.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>注：此处虚拟硬盘相当于整个macOS能使用的硬盘空间。尽管有些资料显示<strong>动态分配</strong>空间能正常安装，但我试验发现，选<strong>动态分配</strong>某些情况下会出现问题，故我本人选<strong>固定大小</strong>。对于大量使用XCode的用户，100GB可能不大够用，应按照自己的需要进行增加空间大小。</p>
<h2 id="设置虚拟电脑"><a href="#设置虚拟电脑" class="headerlink" title="设置虚拟电脑"></a>设置虚拟电脑</h2><p>针对此虚拟电脑，选中进行设置，配置完后确定</p>
<p><img src="https://upload-images.jianshu.io/upload_images/28045466-1b7e34c13751cb98.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>注意：</p>
<ul>
<li><p>去掉软驱勾选</p>
</li>
<li><p>处理器设置4个或者更多</p>
</li>
<li><p>显存拉满</p>
</li>
<li><p>没有盘片的位置，选中下载好的mac系统的ISO文件</p>
</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/28045466-16ec9b0fccf2534b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p><img src="https://upload-images.jianshu.io/upload_images/28045466-63c5d6f7cba01933.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p><img src="https://upload-images.jianshu.io/upload_images/28045466-79e695adfce38df7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p><img src="https://upload-images.jianshu.io/upload_images/28045466-29f669b357e26e62.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h2 id="设置VirtualBox"><a href="#设置VirtualBox" class="headerlink" title="设置VirtualBox"></a>设置VirtualBox</h2><p>进入virtual box的目录运行配置语句</p>
<p>我使用的方法是，<strong>退出virtual box软件</strong>，进入目录后，直接SHIFT+右键调出power shell窗口运行配置命令。注意使用管理员权限</p>
<p><img src="https://upload-images.jianshu.io/upload_images/28045466-06b10dedd3e68645.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>具体执行信息如下，一行一行执行。此处的<strong>“MacOS”</strong>就是之前设置的，虚拟电脑配置里面的名称：<br><img src="https://upload-images.jianshu.io/upload_images/28045466-db9663cce182b98a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="名称需要一致"></p>
<blockquote>
<p>.\VBoxManage.exe modifyvm “MacOS” –cpuidset 00000001 000106e5 00100800 0098e3fd bfebfbff</p>
</blockquote>
<blockquote>
<p>.\VBoxManage setextradata “MacOS” “VBoxInternal/Devices/efi/0/Config/DmiSystemProduct” “iMac19,1”</p>
</blockquote>
<blockquote>
<p>.\VBoxManage setextradata “MacOS” “VBoxInternal/Devices/efi/0/Config/DmiSystemVersion” “1.0”</p>
</blockquote>
<blockquote>
<p>.\VBoxManage setextradata “MacOS” “VBoxInternal/Devices/efi/0/Config/DmiBoardProduct” “Mac-AA95B1DDAB278B95”</p>
</blockquote>
<blockquote>
<p>.\VBoxManage setextradata “MacOS” “VBoxInternal/Devices/smc/0/Config/DeviceKey” “ourhardworkbythesewordsguardedpleasedontsteal(c)AppleComputerInc”</p>
</blockquote>
<blockquote>
<p>.\VBoxManage setextradata “MacOS” “VBoxInternal/Devices/smc/0/Config/GetKeyFromRealSMC” 1</p>
</blockquote>
<blockquote>
<p>.\VBoxManage setextradata “MacOS” VBoxInternal2/EfiGraphicsResolution 1920x1200<br>注意：此处设置了分辨率，如果不适用1920x1200看参考资料第一个链接进行自定义设置。</p>
</blockquote>
<h2 id="启动虚拟电脑"><a href="#启动虚拟电脑" class="headerlink" title="启动虚拟电脑"></a>启动虚拟电脑</h2><p>打开virtual box，点击启动按钮</p>
<p><img src="https://upload-images.jianshu.io/upload_images/28045466-b535dc475f71de79.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>顺带一提，apple公司是完全知道该系统在用虚拟机启动的。目前来看，持不支持也不大力反对</p>
<h3 id="1-配置系统磁盘"><a href="#1-配置系统磁盘" class="headerlink" title="1.配置系统磁盘"></a>1.配置系统磁盘</h3><p>选中文进行下一步安装，使用磁盘工具下一步</p>
<p><img src="https://upload-images.jianshu.io/upload_images/28045466-7be969e1fb1579ea.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>使用之前创建的100G空间，进行抹除</p>
<p><img src="https://upload-images.jianshu.io/upload_images/28045466-9c52f7479eea1465.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p><strong>注意格式选APFS</strong></p>
<p><img src="https://upload-images.jianshu.io/upload_images/28045466-311f5f289536397e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="2-正式安装系统"><a href="#2-正式安装系统" class="headerlink" title="2.正式安装系统"></a>2.正式安装系统</h3><p>关闭磁盘工具后（左上角红色是关闭按钮），开始安装，一路按提示下一步即可</p>
<p><img src="https://upload-images.jianshu.io/upload_images/28045466-ecbd53e07a4ffe3c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h3 id="3-完成，进入系统"><a href="#3-完成，进入系统" class="headerlink" title="3.完成，进入系统"></a>3.完成，进入系统</h3><p><img src="https://upload-images.jianshu.io/upload_images/28045466-81ab07f2ee932bb1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<h2 id="写在后面"><a href="#写在后面" class="headerlink" title="写在后面"></a>写在后面</h2><p>虚拟机安装一个macOS真的挺麻烦，而尝试安装Xcode写代码也很难受。问题出现在</p>
<ul>
<li><p>有些地方图形渲染有问题，怀疑是虚拟机的问题</p>
</li>
<li><p>键盘映射偶尔出现问题</p>
</li>
<li><p>连接手机调试费劲</p>
</li>
</ul>
<p>原本我只是按自己的喜好想做一个番茄钟的软件，一番安装完了，还是选择找朋友弄了一个iMac。😂</p>
<p>不过在安装的过程中，了解不少有趣的知识，也不算时间白费了。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.name/2018/11/21/对称密码学[1]-AES加密算法实现/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Sid Wu">
      <meta itemprop="description" content="我们穿越长城">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sid Wu的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/21/对称密码学[1]-AES加密算法实现/" class="post-title-link" itemprop="url">对称密码学[1]-AES加密算法实现</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-11-21 21:13:33" itemprop="dateCreated datePublished" datetime="2018-11-21T21:13:33+08:00">2018-11-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-28 10:03:29" itemprop="dateModified" datetime="2022-08-28T10:03:29+08:00">2022-08-28</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><em>课程设计时自己写的AES加密算法实现，时间2019年1月</em><br><em>算法实现效率十分低，只是标准库的十分之一左右，可以说优点只有是注释完善了。待完善算法效率和本篇博客介绍逻辑</em></p>
<h1 id="对称密码学-1-AES加密算法实现"><a href="#对称密码学-1-AES加密算法实现" class="headerlink" title="对称密码学[1]-AES加密算法实现"></a>对称密码学[1]-AES加密算法实现</h1><h2 id="一、异或（exclusive-OR，XoR）操作"><a href="#一、异或（exclusive-OR，XoR）操作" class="headerlink" title="一、异或（exclusive OR，XoR）操作"></a>一、异或（exclusive OR，XoR）操作</h2><h2 id="五、算法实现"><a href="#五、算法实现" class="headerlink" title="五、算法实现"></a>五、算法实现</h2><p>头文件部分:<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> AES_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> AES_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">char</span> S_Box[<span class="number">256</span>] = &#123;</span><br><span class="line">	<span class="number">0x63</span>, <span class="number">0x7c</span>, <span class="number">0x77</span>, <span class="number">0x7b</span>, <span class="number">0xf2</span>, <span class="number">0x6b</span>, <span class="number">0x6f</span>, <span class="number">0xc5</span>, <span class="number">0x30</span>, <span class="number">0x01</span>, <span class="number">0x67</span>, <span class="number">0x2b</span>, <span class="number">0xfe</span>, <span class="number">0xd7</span>, <span class="number">0xab</span>, <span class="number">0x76</span>,</span><br><span class="line">	<span class="number">0xca</span>, <span class="number">0x82</span>, <span class="number">0xc9</span>, <span class="number">0x7d</span>, <span class="number">0xfa</span>, <span class="number">0x59</span>, <span class="number">0x47</span>, <span class="number">0xf0</span>, <span class="number">0xad</span>, <span class="number">0xd4</span>, <span class="number">0xa2</span>, <span class="number">0xaf</span>, <span class="number">0x9c</span>, <span class="number">0xa4</span>, <span class="number">0x72</span>, <span class="number">0xc0</span>,</span><br><span class="line">	<span class="number">0xb7</span>, <span class="number">0xfd</span>, <span class="number">0x93</span>, <span class="number">0x26</span>, <span class="number">0x36</span>, <span class="number">0x3f</span>, <span class="number">0xf7</span>, <span class="number">0xcc</span>, <span class="number">0x34</span>, <span class="number">0xa5</span>, <span class="number">0xe5</span>, <span class="number">0xf1</span>, <span class="number">0x71</span>, <span class="number">0xd8</span>, <span class="number">0x31</span>, <span class="number">0x15</span>,</span><br><span class="line">	<span class="number">0x04</span>, <span class="number">0xc7</span>, <span class="number">0x23</span>, <span class="number">0xc3</span>, <span class="number">0x18</span>, <span class="number">0x96</span>, <span class="number">0x05</span>, <span class="number">0x9a</span>, <span class="number">0x07</span>, <span class="number">0x12</span>, <span class="number">0x80</span>, <span class="number">0xe2</span>, <span class="number">0xeb</span>, <span class="number">0x27</span>, <span class="number">0xb2</span>, <span class="number">0x75</span>,</span><br><span class="line">	<span class="number">0x09</span>, <span class="number">0x83</span>, <span class="number">0x2c</span>, <span class="number">0x1a</span>, <span class="number">0x1b</span>, <span class="number">0x6e</span>, <span class="number">0x5a</span>, <span class="number">0xa0</span>, <span class="number">0x52</span>, <span class="number">0x3b</span>, <span class="number">0xd6</span>, <span class="number">0xb3</span>, <span class="number">0x29</span>, <span class="number">0xe3</span>, <span class="number">0x2f</span>, <span class="number">0x84</span>,</span><br><span class="line">	<span class="number">0x53</span>, <span class="number">0xd1</span>, <span class="number">0x00</span>, <span class="number">0xed</span>, <span class="number">0x20</span>, <span class="number">0xfc</span>, <span class="number">0xb1</span>, <span class="number">0x5b</span>, <span class="number">0x6a</span>, <span class="number">0xcb</span>, <span class="number">0xbe</span>, <span class="number">0x39</span>, <span class="number">0x4a</span>, <span class="number">0x4c</span>, <span class="number">0x58</span>, <span class="number">0xcf</span>,</span><br><span class="line">	<span class="number">0xd0</span>, <span class="number">0xef</span>, <span class="number">0xaa</span>, <span class="number">0xfb</span>, <span class="number">0x43</span>, <span class="number">0x4d</span>, <span class="number">0x33</span>, <span class="number">0x85</span>, <span class="number">0x45</span>, <span class="number">0xf9</span>, <span class="number">0x02</span>, <span class="number">0x7f</span>, <span class="number">0x50</span>, <span class="number">0x3c</span>, <span class="number">0x9f</span>, <span class="number">0xa8</span>,</span><br><span class="line">	<span class="number">0x51</span>, <span class="number">0xa3</span>, <span class="number">0x40</span>, <span class="number">0x8f</span>, <span class="number">0x92</span>, <span class="number">0x9d</span>, <span class="number">0x38</span>, <span class="number">0xf5</span>, <span class="number">0xbc</span>, <span class="number">0xb6</span>, <span class="number">0xda</span>, <span class="number">0x21</span>, <span class="number">0x10</span>, <span class="number">0xff</span>, <span class="number">0xf3</span>, <span class="number">0xd2</span>,</span><br><span class="line">	<span class="number">0xcd</span>, <span class="number">0x0c</span>, <span class="number">0x13</span>, <span class="number">0xec</span>, <span class="number">0x5f</span>, <span class="number">0x97</span>, <span class="number">0x44</span>, <span class="number">0x17</span>, <span class="number">0xc4</span>, <span class="number">0xa7</span>, <span class="number">0x7e</span>, <span class="number">0x3d</span>, <span class="number">0x64</span>, <span class="number">0x5d</span>, <span class="number">0x19</span>, <span class="number">0x73</span>,</span><br><span class="line">	<span class="number">0x60</span>, <span class="number">0x81</span>, <span class="number">0x4f</span>, <span class="number">0xdc</span>, <span class="number">0x22</span>, <span class="number">0x2a</span>, <span class="number">0x90</span>, <span class="number">0x88</span>, <span class="number">0x46</span>, <span class="number">0xee</span>, <span class="number">0xb8</span>, <span class="number">0x14</span>, <span class="number">0xde</span>, <span class="number">0x5e</span>, <span class="number">0x0b</span>, <span class="number">0xdb</span>,</span><br><span class="line">	<span class="number">0xe0</span>, <span class="number">0x32</span>, <span class="number">0x3a</span>, <span class="number">0x0a</span>, <span class="number">0x49</span>, <span class="number">0x06</span>, <span class="number">0x24</span>, <span class="number">0x5c</span>, <span class="number">0xc2</span>, <span class="number">0xd3</span>, <span class="number">0xac</span>, <span class="number">0x62</span>, <span class="number">0x91</span>, <span class="number">0x95</span>, <span class="number">0xe4</span>, <span class="number">0x79</span>,</span><br><span class="line">	<span class="number">0xe7</span>, <span class="number">0xc8</span>, <span class="number">0x37</span>, <span class="number">0x6d</span>, <span class="number">0x8d</span>, <span class="number">0xd5</span>, <span class="number">0x4e</span>, <span class="number">0xa9</span>, <span class="number">0x6c</span>, <span class="number">0x56</span>, <span class="number">0xf4</span>, <span class="number">0xea</span>, <span class="number">0x65</span>, <span class="number">0x7a</span>, <span class="number">0xae</span>, <span class="number">0x08</span>,</span><br><span class="line">	<span class="number">0xba</span>, <span class="number">0x78</span>, <span class="number">0x25</span>, <span class="number">0x2e</span>, <span class="number">0x1c</span>, <span class="number">0xa6</span>, <span class="number">0xb4</span>, <span class="number">0xc6</span>, <span class="number">0xe8</span>, <span class="number">0xdd</span>, <span class="number">0x74</span>, <span class="number">0x1f</span>, <span class="number">0x4b</span>, <span class="number">0xbd</span>, <span class="number">0x8b</span>, <span class="number">0x8a</span>,</span><br><span class="line">	<span class="number">0x70</span>, <span class="number">0x3e</span>, <span class="number">0xb5</span>, <span class="number">0x66</span>, <span class="number">0x48</span>, <span class="number">0x03</span>, <span class="number">0xf6</span>, <span class="number">0x0e</span>, <span class="number">0x61</span>, <span class="number">0x35</span>, <span class="number">0x57</span>, <span class="number">0xb9</span>, <span class="number">0x86</span>, <span class="number">0xc1</span>, <span class="number">0x1d</span>, <span class="number">0x9e</span>,</span><br><span class="line">	<span class="number">0xe1</span>, <span class="number">0xf8</span>, <span class="number">0x98</span>, <span class="number">0x11</span>, <span class="number">0x69</span>, <span class="number">0xd9</span>, <span class="number">0x8e</span>, <span class="number">0x94</span>, <span class="number">0x9b</span>, <span class="number">0x1e</span>, <span class="number">0x87</span>, <span class="number">0xe9</span>, <span class="number">0xce</span>, <span class="number">0x55</span>, <span class="number">0x28</span>, <span class="number">0xdf</span>,</span><br><span class="line">	<span class="number">0x8c</span>, <span class="number">0xa1</span>, <span class="number">0x89</span>, <span class="number">0x0d</span>, <span class="number">0xbf</span>, <span class="number">0xe6</span>, <span class="number">0x42</span>, <span class="number">0x68</span>, <span class="number">0x41</span>, <span class="number">0x99</span>, <span class="number">0x2d</span>, <span class="number">0x0f</span>, <span class="number">0xb0</span>, <span class="number">0x54</span>, <span class="number">0xbb</span>, <span class="number">0x16</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">char</span> Inv_S_Box[<span class="number">256</span>] = &#123;</span><br><span class="line">	<span class="number">0x52</span>, <span class="number">0x09</span>, <span class="number">0x6A</span>, <span class="number">0xD5</span>, <span class="number">0x30</span>, <span class="number">0x36</span>, <span class="number">0xA5</span>, <span class="number">0x38</span>,<span class="number">0xBF</span>, <span class="number">0x40</span>, <span class="number">0xA3</span>, <span class="number">0x9E</span>, <span class="number">0x81</span>, <span class="number">0xF3</span>, <span class="number">0xD7</span>, <span class="number">0xFB</span> ,</span><br><span class="line">	<span class="number">0x7C</span>, <span class="number">0xE3</span>, <span class="number">0x39</span>, <span class="number">0x82</span>, <span class="number">0x9B</span>, <span class="number">0x2F</span>, <span class="number">0xFF</span>, <span class="number">0x87</span>,<span class="number">0x34</span>, <span class="number">0x8E</span>, <span class="number">0x43</span>, <span class="number">0x44</span>, <span class="number">0xC4</span>, <span class="number">0xDE</span>, <span class="number">0xE9</span>, <span class="number">0xCB</span> ,</span><br><span class="line">	<span class="number">0x54</span>, <span class="number">0x7B</span>, <span class="number">0x94</span>, <span class="number">0x32</span>, <span class="number">0xA6</span>, <span class="number">0xC2</span>, <span class="number">0x23</span>, <span class="number">0x3D</span>,<span class="number">0xEE</span>, <span class="number">0x4C</span>, <span class="number">0x95</span>, <span class="number">0x0B</span>, <span class="number">0x42</span>, <span class="number">0xFA</span>, <span class="number">0xC3</span>, <span class="number">0x4E</span> ,</span><br><span class="line">	<span class="number">0x08</span>, <span class="number">0x2E</span>, <span class="number">0xA1</span>, <span class="number">0x66</span>, <span class="number">0x28</span>, <span class="number">0xD9</span>, <span class="number">0x24</span>, <span class="number">0xB2</span>,<span class="number">0x76</span>, <span class="number">0x5B</span>, <span class="number">0xA2</span>, <span class="number">0x49</span>, <span class="number">0x6D</span>, <span class="number">0x8B</span>, <span class="number">0xD1</span>, <span class="number">0x25</span> ,</span><br><span class="line">	<span class="number">0x72</span>, <span class="number">0xF8</span>, <span class="number">0xF6</span>, <span class="number">0x64</span>, <span class="number">0x86</span>, <span class="number">0x68</span>, <span class="number">0x98</span>, <span class="number">0x16</span>,<span class="number">0xD4</span>, <span class="number">0xA4</span>, <span class="number">0x5C</span>, <span class="number">0xCC</span>, <span class="number">0x5D</span>, <span class="number">0x65</span>, <span class="number">0xB6</span>, <span class="number">0x92</span> ,</span><br><span class="line">	<span class="number">0x6C</span>, <span class="number">0x70</span>, <span class="number">0x48</span>, <span class="number">0x50</span>, <span class="number">0xFD</span>, <span class="number">0xED</span>, <span class="number">0xB9</span>, <span class="number">0xDA</span>,<span class="number">0x5E</span>, <span class="number">0x15</span>, <span class="number">0x46</span>, <span class="number">0x57</span>, <span class="number">0xA7</span>, <span class="number">0x8D</span>, <span class="number">0x9D</span>, <span class="number">0x84</span> ,</span><br><span class="line">	<span class="number">0x90</span>, <span class="number">0xD8</span>, <span class="number">0xAB</span>, <span class="number">0x00</span>, <span class="number">0x8C</span>, <span class="number">0xBC</span>, <span class="number">0xD3</span>, <span class="number">0x0A</span>,<span class="number">0xF7</span>, <span class="number">0xE4</span>, <span class="number">0x58</span>, <span class="number">0x05</span>, <span class="number">0xB8</span>, <span class="number">0xB3</span>, <span class="number">0x45</span>, <span class="number">0x06</span> ,</span><br><span class="line">	<span class="number">0xD0</span>, <span class="number">0x2C</span>, <span class="number">0x1E</span>, <span class="number">0x8F</span>, <span class="number">0xCA</span>, <span class="number">0x3F</span>, <span class="number">0x0F</span>, <span class="number">0x02</span>,<span class="number">0xC1</span>, <span class="number">0xAF</span>, <span class="number">0xBD</span>, <span class="number">0x03</span>, <span class="number">0x01</span>, <span class="number">0x13</span>, <span class="number">0x8A</span>, <span class="number">0x6B</span> ,</span><br><span class="line">	<span class="number">0x3A</span>, <span class="number">0x91</span>, <span class="number">0x11</span>, <span class="number">0x41</span>, <span class="number">0x4F</span>, <span class="number">0x67</span>, <span class="number">0xDC</span>, <span class="number">0xEA</span>,<span class="number">0x97</span>, <span class="number">0xF2</span>, <span class="number">0xCF</span>, <span class="number">0xCE</span>, <span class="number">0xF0</span>, <span class="number">0xB4</span>, <span class="number">0xE6</span>, <span class="number">0x73</span> ,</span><br><span class="line">	<span class="number">0x96</span>, <span class="number">0xAC</span>, <span class="number">0x74</span>, <span class="number">0x22</span>, <span class="number">0xE7</span>, <span class="number">0xAD</span>, <span class="number">0x35</span>, <span class="number">0x85</span>,<span class="number">0xE2</span>, <span class="number">0xF9</span>, <span class="number">0x37</span>, <span class="number">0xE8</span>, <span class="number">0x1C</span>, <span class="number">0x75</span>, <span class="number">0xDF</span>, <span class="number">0x6E</span> ,</span><br><span class="line">	<span class="number">0x47</span>, <span class="number">0xF1</span>, <span class="number">0x1A</span>, <span class="number">0x71</span>, <span class="number">0x1D</span>, <span class="number">0x29</span>, <span class="number">0xC5</span>, <span class="number">0x89</span>,<span class="number">0x6F</span>, <span class="number">0xB7</span>, <span class="number">0x62</span>, <span class="number">0x0E</span>, <span class="number">0xAA</span>, <span class="number">0x18</span>, <span class="number">0xBE</span>, <span class="number">0x1B</span> ,</span><br><span class="line">	<span class="number">0xFC</span>, <span class="number">0x56</span>, <span class="number">0x3E</span>, <span class="number">0x4B</span>, <span class="number">0xC6</span>, <span class="number">0xD2</span>, <span class="number">0x79</span>, <span class="number">0x20</span>,<span class="number">0x9A</span>, <span class="number">0xDB</span>, <span class="number">0xC0</span>, <span class="number">0xFE</span>, <span class="number">0x78</span>, <span class="number">0xCD</span>, <span class="number">0x5A</span>, <span class="number">0xF4</span> ,</span><br><span class="line">	<span class="number">0x1F</span>, <span class="number">0xDD</span>, <span class="number">0xA8</span>, <span class="number">0x33</span>, <span class="number">0x88</span>, <span class="number">0x07</span>, <span class="number">0xC7</span>, <span class="number">0x31</span>,<span class="number">0xB1</span>, <span class="number">0x12</span>, <span class="number">0x10</span>, <span class="number">0x59</span>, <span class="number">0x27</span>, <span class="number">0x80</span>, <span class="number">0xEC</span>, <span class="number">0x5F</span> ,</span><br><span class="line">	<span class="number">0x60</span>, <span class="number">0x51</span>, <span class="number">0x7F</span>, <span class="number">0xA9</span>, <span class="number">0x19</span>, <span class="number">0xB5</span>, <span class="number">0x4A</span>, <span class="number">0x0D</span>,<span class="number">0x2D</span>, <span class="number">0xE5</span>, <span class="number">0x7A</span>, <span class="number">0x9F</span>, <span class="number">0x93</span>, <span class="number">0xC9</span>, <span class="number">0x9C</span>, <span class="number">0xEF</span> ,</span><br><span class="line">	<span class="number">0xA0</span>, <span class="number">0xE0</span>, <span class="number">0x3B</span>, <span class="number">0x4D</span>, <span class="number">0xAE</span>, <span class="number">0x2A</span>, <span class="number">0xF5</span>, <span class="number">0xB0</span>,<span class="number">0xC8</span>, <span class="number">0xEB</span>, <span class="number">0xBB</span>, <span class="number">0x3C</span>, <span class="number">0x83</span>, <span class="number">0x53</span>, <span class="number">0x99</span>, <span class="number">0x61</span> ,</span><br><span class="line">	<span class="number">0x17</span>, <span class="number">0x2B</span>, <span class="number">0x04</span>, <span class="number">0x7E</span>, <span class="number">0xBA</span>, <span class="number">0x77</span>, <span class="number">0xD6</span>, <span class="number">0x26</span>,<span class="number">0xE1</span>, <span class="number">0x69</span>, <span class="number">0x14</span>, <span class="number">0x63</span>, <span class="number">0x55</span>, <span class="number">0x21</span>, <span class="number">0x0C</span>, <span class="number">0x7D</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义十六进制常数组用于异或state[4][4]</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">char</span> RCon[<span class="number">10</span>][<span class="number">4</span>] =</span><br><span class="line">&#123;</span><br><span class="line">	&#123; <span class="number">0x1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span> &#125;,&#123; <span class="number">0x2</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span> &#125;,&#123; <span class="number">0x4</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span> &#125;,&#123; <span class="number">0x8</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span> &#125;,&#123; <span class="number">0x10</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span> &#125;,</span><br><span class="line">&#123; <span class="number">0x20</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span> &#125;,&#123; <span class="number">0x40</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span> &#125;,&#123; <span class="number">0x80</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span> &#125;,&#123; <span class="number">0x1b</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span> &#125;,&#123; <span class="number">0x36</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span> &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 字节替换（加密+解密）</span></span><br><span class="line"><span class="comment">// f 为真时，进行的是加密操作</span></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">char</span> <span class="title">SubBytes</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> a, <span class="keyword">bool</span> f = <span class="literal">false</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 进行轮密钥异或</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AddAroundKey</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> a[<span class="number">16</span>], <span class="keyword">unsigned</span> <span class="keyword">char</span> k[<span class="number">16</span>])</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 显示目前的State数据</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OutPutMatrix</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> s[<span class="number">16</span>])</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 轮密钥的编排方案</span></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">char</span>* <span class="title">KeyExpansion</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> k[<span class="number">16</span>])</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 行位移</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ShiftRows</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> a[<span class="number">16</span>])</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 逆向行位移</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InvShiftRows</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> a[<span class="number">16</span>])</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义在GF域上的乘法</span></span><br><span class="line"><span class="comment">// a是每次运算的常数；b是列中的元素</span></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">char</span> <span class="title">FFmul</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> a, <span class="keyword">unsigned</span> <span class="keyword">char</span> b)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 列混淆</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MixColumns</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> state[<span class="number">16</span>])</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 逆向列混淆</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InvMixColumns</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> state[<span class="number">16</span>])</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 加密时输入三个参数。</span></span><br><span class="line"><span class="comment">// 第一个是明文的4*4字节矩阵，第二个是初始的密钥</span></span><br><span class="line"><span class="comment">// 第三个参数表示是否显示各轮加密后的state情况，默认值不显示</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AESEncryption</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> state[<span class="number">16</span>], <span class="keyword">unsigned</span> <span class="keyword">char</span>* keyAfter, <span class="keyword">bool</span> f = <span class="literal">false</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解密时输入三个参数。</span></span><br><span class="line"><span class="comment">// 第一个是密文的4*4字节矩阵，第二个是密钥的4*4字节矩阵</span></span><br><span class="line"><span class="comment">// 第三个参数表示是否显示各轮解密后的state情况，默认值不显示</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AESDecryption</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> state[<span class="number">16</span>], <span class="keyword">unsigned</span> <span class="keyword">char</span>* keyAfter, <span class="keyword">bool</span> f = <span class="literal">false</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AESdocEncryption</span><span class="params">(<span class="built_in">string</span> p)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AESdocDecryption</span><span class="params">(<span class="built_in">string</span> p)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure></p>
<p>正式实现部分<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"AES.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;  </span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 字节替换（加密+解密）</span></span><br><span class="line"><span class="comment">// f 为真时， 进行的是加密操作</span></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">char</span> <span class="title">SubBytes</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> a, <span class="keyword">bool</span> f)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 加密时使用的S盒</span></span><br><span class="line">	<span class="keyword">if</span> (f == <span class="literal">false</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> c = (<span class="keyword">int</span>)a;</span><br><span class="line">		<span class="keyword">unsigned</span> <span class="keyword">char</span>  fileName = S_Box[c];</span><br><span class="line">		<span class="keyword">return</span> fileName;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 解密时使用的S盒</span></span><br><span class="line">	<span class="keyword">if</span> (f == <span class="literal">true</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> c = (<span class="keyword">int</span>)a;</span><br><span class="line">		<span class="keyword">unsigned</span> <span class="keyword">char</span>  fileName = Inv_S_Box[c];</span><br><span class="line">		<span class="keyword">return</span> fileName;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 进行轮密钥异或</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AddAroundKey</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> a[<span class="number">16</span>], <span class="keyword">unsigned</span> <span class="keyword">char</span> k[<span class="number">16</span>])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">16</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		a[i] = a[i] ^ k[i];</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 显示目前的State数据</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OutPutMatrix</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> s[<span class="number">16</span>])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">16</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; hex &lt;&lt; (<span class="keyword">int</span>)s[i] &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">		<span class="keyword">if</span> (i % <span class="number">4</span> == <span class="number">3</span> &amp;&amp; i != <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 轮密钥的编排方案</span></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">char</span>* <span class="title">KeyExpansion</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> k[<span class="number">16</span>])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 最后生成44个字，每个字为4个十六进制数字，一轮加密使用4个</span></span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">unsigned</span> <span class="keyword">char</span> w[<span class="number">44</span>][<span class="number">4</span>];</span><br><span class="line">	<span class="comment">// 为内部运算准备的临时容器</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">char</span> temp[<span class="number">4</span>];</span><br><span class="line">	<span class="comment">// 设置初始的w1、w2、w3、w4</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			w[i][j] = k[<span class="number">4</span> * i + j];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 进行生成</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">4</span>; i &lt; <span class="number">44</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 赋临时变量</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			temp[j] = w[i - <span class="number">1</span>][j];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (i % <span class="number">4</span> == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">unsigned</span> <span class="keyword">char</span> t = temp[<span class="number">3</span>];</span><br><span class="line">			<span class="comment">// 对temp中元素循环左移</span></span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">3</span>; j &gt; <span class="number">0</span>; j--)</span><br><span class="line">			&#123;</span><br><span class="line">				temp[j] = temp[j - <span class="number">1</span>];</span><br><span class="line">			&#125;</span><br><span class="line">			temp[<span class="number">0</span>] = t;</span><br><span class="line">			<span class="comment">// 对temp中元素进行字节替换</span></span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++)</span><br><span class="line">			&#123;</span><br><span class="line">				temp[j] = SubBytes(temp[j]);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">// 与常数数组进行异或</span></span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++)</span><br><span class="line">			&#123;</span><br><span class="line">				temp[j] = temp[j] ^ RCon[i / <span class="number">4</span> - <span class="number">1</span>][j];</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			w[i][j] = w[i - <span class="number">4</span>][j] ^ temp[j];</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> &amp;w[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 行位移</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ShiftRows</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> a[<span class="number">16</span>])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">int</span> temp = a[<span class="number">4</span> * i];</span><br><span class="line">			a[<span class="number">4</span> * i] = a[<span class="number">4</span> * i + <span class="number">1</span>];</span><br><span class="line">			a[<span class="number">4</span> * i + <span class="number">1</span>] = a[<span class="number">4</span> * i + <span class="number">2</span>];</span><br><span class="line">			a[<span class="number">4</span> * i + <span class="number">2</span>] = a[<span class="number">4</span> * i + <span class="number">3</span>];</span><br><span class="line">			a[<span class="number">4</span> * i + <span class="number">3</span>] = temp;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 逆向行位移</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InvShiftRows</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> a[<span class="number">16</span>])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">int</span> temp = a[<span class="number">4</span> * i + <span class="number">3</span>];</span><br><span class="line">			a[<span class="number">4</span> * i + <span class="number">3</span>] = a[<span class="number">4</span> * i + <span class="number">2</span>];</span><br><span class="line">			a[<span class="number">4</span> * i + <span class="number">2</span>] = a[<span class="number">4</span> * i + <span class="number">1</span>];</span><br><span class="line">			a[<span class="number">4</span> * i + <span class="number">1</span>] = a[<span class="number">4</span> * i];</span><br><span class="line">			a[<span class="number">4</span> * i] = temp;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义在GF域上的乘法</span></span><br><span class="line"><span class="comment">// a是每次运算的常数；b是列中的元素</span></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">char</span> <span class="title">FFmul</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> a, <span class="keyword">unsigned</span> <span class="keyword">char</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// AES中，最大为OX0E，所以4次是最大数量</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">char</span> bw[<span class="number">4</span>];</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">char</span> res = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	bw[<span class="number">0</span>] = b;</span><br><span class="line">	<span class="comment">// GF域上的乘法</span></span><br><span class="line">	<span class="comment">// bw[i]储存b, b*0x2, b*0x4, b*0x8</span></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; <span class="number">4</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 域上乘以0x2的乘法是向左移动一位</span></span><br><span class="line">		bw[i] = bw[i - <span class="number">1</span>] &lt;&lt; <span class="number">1</span>;</span><br><span class="line">		<span class="comment">// 若被乘数大于等于0x80，</span></span><br><span class="line">		<span class="comment">// 乘法的结果还需要异或0x1b保证运算结果不溢出GF域</span></span><br><span class="line">		<span class="keyword">if</span> (bw[i - <span class="number">1</span>] &amp; <span class="number">0x80</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			bw[i] ^= <span class="number">0x1b</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 若第一个常数向右移动i位后，末位为1时，即模2有余时</span></span><br><span class="line">		<span class="comment">// 例如0x0E*b被分解为(b + b*0x08)</span></span><br><span class="line">		<span class="keyword">if</span> ((a &gt;&gt; i) &amp; <span class="number">0x01</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			res ^= bw[i];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 列混淆</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MixColumns</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> state[<span class="number">16</span>])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">char</span> t[<span class="number">4</span>];</span><br><span class="line">	<span class="keyword">int</span> r, c;</span><br><span class="line">	<span class="comment">// 开始进行列混淆</span></span><br><span class="line">	<span class="keyword">for</span> (c = <span class="number">0</span>; c &lt; <span class="number">4</span>; c++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (r = <span class="number">0</span>; r &lt; <span class="number">4</span>; r++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">// 在临时变量t中读入state中的数值</span></span><br><span class="line">			t[r] = state[<span class="number">4</span> * r + c];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span> (r = <span class="number">0</span>; r &lt; <span class="number">4</span>; r++)</span><br><span class="line">		&#123;</span><br><span class="line">			state[<span class="number">4</span> * r + c] = FFmul(<span class="number">0x02</span>, t[r])</span><br><span class="line">				^ FFmul(<span class="number">0x03</span>, t[(r + <span class="number">1</span>) % <span class="number">4</span>])</span><br><span class="line">				^ FFmul(<span class="number">0x01</span>, t[(r + <span class="number">2</span>) % <span class="number">4</span>])</span><br><span class="line">				^ FFmul(<span class="number">0x01</span>, t[(r + <span class="number">3</span>) % <span class="number">4</span>]);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 逆向列混淆</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InvMixColumns</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> state[<span class="number">16</span>])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">char</span> t[<span class="number">4</span>];</span><br><span class="line">	<span class="keyword">int</span> r, c;</span><br><span class="line">	<span class="comment">// 开始进行列混淆</span></span><br><span class="line">	<span class="keyword">for</span> (c = <span class="number">0</span>; c &lt; <span class="number">4</span>; c++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (r = <span class="number">0</span>; r &lt; <span class="number">4</span>; r++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">// 在临时变量t中读入state中的数值</span></span><br><span class="line">			t[r] = state[<span class="number">4</span> * r + c];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span> (r = <span class="number">0</span>; r &lt; <span class="number">4</span>; r++)</span><br><span class="line">		&#123;</span><br><span class="line">			state[<span class="number">4</span> * r + c] = FFmul(<span class="number">0x0e</span>, t[r])</span><br><span class="line">				^ FFmul(<span class="number">0x0b</span>, t[(r + <span class="number">1</span>) % <span class="number">4</span>])</span><br><span class="line">				^ FFmul(<span class="number">0x0d</span>, t[(r + <span class="number">2</span>) % <span class="number">4</span>])</span><br><span class="line">				^ FFmul(<span class="number">0x09</span>, t[(r + <span class="number">3</span>) % <span class="number">4</span>]);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 加密时输入三个参数。</span></span><br><span class="line"><span class="comment">// 第一个是明文的4*4字节矩阵，第二个是初始的密钥</span></span><br><span class="line"><span class="comment">// 第三个参数表示是否显示各轮加密后的state情况，默认值不显示</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AESEncryption</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> state[<span class="number">16</span>], <span class="keyword">unsigned</span> <span class="keyword">char</span>* keyAfter, <span class="keyword">bool</span> f)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 进行轮密钥的生成</span></span><br><span class="line">	<span class="comment">// 轮密钥空间是11个4*4的矩阵</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">char</span> RoundKey[<span class="number">16</span>];</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 使用一个密钥，把密钥指向的指针后移一次</span></span><br><span class="line">	<span class="keyword">int</span> NumberOfKey = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 生成第一个轮密钥空间</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">16</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		RoundKey[i] = *(keyAfter + NumberOfKey);</span><br><span class="line">		NumberOfKey = NumberOfKey + <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 进行白化</span></span><br><span class="line">	AddAroundKey(state, RoundKey);</span><br><span class="line">	<span class="comment">// 开始进行10轮的轮加密</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (i &lt; <span class="number">9</span>)<span class="comment">// 最后一轮不进行列混淆</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">// 进行S盒代换</span></span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">16</span>; j++)</span><br><span class="line">			&#123;</span><br><span class="line">				*(&amp;state[<span class="number">0</span>] + j) = SubBytes(*(&amp;state[<span class="number">0</span>] + j));</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 进行行位移和列混淆</span></span><br><span class="line">			ShiftRows(state);</span><br><span class="line">			MixColumns(state);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 进行轮密钥的重置			</span></span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">16</span>; j++)</span><br><span class="line">			&#123;</span><br><span class="line">				RoundKey[j] = *(keyAfter + NumberOfKey);</span><br><span class="line">				NumberOfKey = NumberOfKey + <span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			AddAroundKey(state, RoundKey);</span><br><span class="line">			<span class="keyword">if</span> (f == <span class="literal">true</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span> &lt;&lt; <span class="string">"第"</span> &lt;&lt; i + <span class="number">1</span> &lt;&lt; <span class="string">"轮加密后矩阵是："</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">				OutPutMatrix(state);</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (i == <span class="number">9</span>)<span class="comment">// 最后一轮不进行列混淆</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">// 进行S盒代换</span></span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">16</span>; j++)</span><br><span class="line">			&#123;</span><br><span class="line">				*(&amp;state[<span class="number">0</span>] + j) = SubBytes(*(&amp;state[<span class="number">0</span>] + j));</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 进行行位移</span></span><br><span class="line">			ShiftRows(state);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 进行轮密钥的重置</span></span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">16</span>; j++)</span><br><span class="line">			&#123;</span><br><span class="line">				RoundKey[j] = *(keyAfter + NumberOfKey);</span><br><span class="line">				NumberOfKey += <span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			AddAroundKey(state, RoundKey);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (f == <span class="literal">true</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span> &lt;&lt; <span class="string">"第"</span> &lt;&lt; i + <span class="number">1</span> &lt;&lt; <span class="string">"轮加密后矩阵是："</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">				OutPutMatrix(state);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解密时输入三个参数。</span></span><br><span class="line"><span class="comment">// 第一个是密文的4*4字节矩阵，第二个是密钥的4*4字节矩阵</span></span><br><span class="line"><span class="comment">// 第三个参数表示是否显示各轮解密后的state情况，默认值不显示</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AESDecryption</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> state[<span class="number">16</span>], <span class="keyword">unsigned</span> <span class="keyword">char</span>* keyAfter, <span class="keyword">bool</span> f)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 进行轮密钥的生成</span></span><br><span class="line">	<span class="comment">// 轮密钥空间是11个4*4的矩阵</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">char</span> RoundKey[<span class="number">16</span>];</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 使用一个密钥，把指向密钥的指针后移一次</span></span><br><span class="line">	<span class="comment">// 解密时从最后一轮密钥矩阵开始使用,依次向前</span></span><br><span class="line">	<span class="keyword">int</span> NumberOfKey = <span class="number">160</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 生成第一个轮密钥空间</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">16</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line"></span><br><span class="line">		RoundKey[i] = *(keyAfter + NumberOfKey);</span><br><span class="line">		NumberOfKey = NumberOfKey + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 开始进行解密操作</span></span><br><span class="line">	<span class="comment">// 解密开始，进行白化的逆操作</span></span><br><span class="line">	AddAroundKey(state, RoundKey);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 解密最后一轮没有列混淆</span></span><br><span class="line">		<span class="keyword">if</span> (i == <span class="number">9</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			NumberOfKey = NumberOfKey - <span class="number">32</span>;</span><br><span class="line">			<span class="comment">// 生成本轮的密钥</span></span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">16</span>; j++)</span><br><span class="line">			&#123;</span><br><span class="line"></span><br><span class="line">				RoundKey[j] = *(keyAfter + NumberOfKey);</span><br><span class="line">				NumberOfKey = NumberOfKey + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">// 逆向行位移</span></span><br><span class="line">			InvShiftRows(state);</span><br><span class="line">			<span class="comment">// S盒的逆置换</span></span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">16</span>; j++)</span><br><span class="line">			&#123;</span><br><span class="line">				*(&amp;state[<span class="number">0</span>] + j) = SubBytes(*(&amp;state[<span class="number">0</span>] + j), <span class="literal">true</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">// 轮密钥加</span></span><br><span class="line">			AddAroundKey(state, RoundKey);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (f == <span class="literal">true</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span> &lt;&lt; <span class="string">"第"</span> &lt;&lt; i + <span class="number">1</span> &lt;&lt; <span class="string">"轮解密后矩阵是："</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">				OutPutMatrix(state);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			NumberOfKey = NumberOfKey - <span class="number">32</span>;</span><br><span class="line">			<span class="comment">// 生成本轮的密钥</span></span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">16</span>; j++)</span><br><span class="line">			&#123;</span><br><span class="line"></span><br><span class="line">				RoundKey[j] = *(keyAfter + NumberOfKey);</span><br><span class="line">				NumberOfKey = NumberOfKey + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">// 逆向行位移</span></span><br><span class="line">			InvShiftRows(state);</span><br><span class="line">			<span class="comment">// S盒的逆置换</span></span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">16</span>; j++)</span><br><span class="line">			&#123;</span><br><span class="line">				*(&amp;state[<span class="number">0</span>] + j) = SubBytes(*(&amp;state[<span class="number">0</span>] + j), <span class="literal">true</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">// 轮密钥加</span></span><br><span class="line">			AddAroundKey(state, RoundKey);</span><br><span class="line">			<span class="comment">// 逆向列混淆</span></span><br><span class="line">			InvMixColumns(state);</span><br><span class="line">			<span class="keyword">if</span> (f == <span class="literal">true</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span> &lt;&lt; <span class="string">"第"</span> &lt;&lt; i + <span class="number">1</span> &lt;&lt; <span class="string">"轮解密后矩阵是："</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">				OutPutMatrix(state);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 文件的加密操作</span></span><br><span class="line"><span class="keyword">extern</span><span class="string">"C"</span> __declspec(dllexport) <span class="function"><span class="keyword">void</span> <span class="title">AESdocEncryption</span><span class="params">(<span class="keyword">char</span>* p, <span class="keyword">unsigned</span> <span class="keyword">char</span> Key[<span class="number">16</span>])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 进行轮密钥扩展</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">char</span>* keyAfter = KeyExpansion(Key);</span><br><span class="line"></span><br><span class="line">	<span class="function">ifstream <span class="title">fin</span><span class="params">(p, ios::binary)</span></span>;</span><br><span class="line">	<span class="keyword">if</span> (fin.fail())<span class="comment">//打开源文件失败</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"Error 1: Fail to open the source file."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		fin.close();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"reading to complete"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// SizeOfStream储存文件的字节长度</span></span><br><span class="line">		fin.seekg(<span class="number">0</span>, ios::end);</span><br><span class="line">		<span class="keyword">long</span> SizeOfStream = fin.tellg();</span><br><span class="line">		fin.seekg(<span class="number">0</span>, ios::beg);</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"the size of the file is "</span> &lt;&lt; SizeOfStream &lt;&lt; <span class="string">" bytes"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 创建一个写入文件</span></span><br><span class="line">		<span class="comment">// C语言字符串真的蛋疼</span></span><br><span class="line">		<span class="keyword">char</span> *fileName = (<span class="keyword">char</span>*)<span class="built_in">malloc</span>(<span class="built_in">strlen</span>(p) + <span class="built_in">strlen</span>(<span class="string">".crp"</span>) + <span class="number">1</span>);</span><br><span class="line">		<span class="built_in">strcpy</span>(fileName, p);</span><br><span class="line">		<span class="built_in">strcat</span>(fileName, <span class="string">".crp"</span>);</span><br><span class="line">		<span class="function">ofstream <span class="title">fout</span><span class="params">(fileName, ios::binary)</span></span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (fout.fail())<span class="comment">//创建文件失败</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; <span class="string">"Error 2: Fail to create the new file."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">			fout.close();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">// 文件中每16个字节进入一个临时4*4矩阵进行加密代换</span></span><br><span class="line">			<span class="comment">// 初始化这个容器</span></span><br><span class="line">			<span class="keyword">unsigned</span> <span class="keyword">char</span> TempMatrix[<span class="number">16</span>];</span><br><span class="line">			<span class="built_in">memset</span>(TempMatrix, <span class="number">0</span>, <span class="keyword">sizeof</span>(TempMatrix));</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 整个待加密文件读入内存</span></span><br><span class="line">			<span class="keyword">char</span>* StoredChar = <span class="keyword">new</span> <span class="keyword">char</span>[SizeOfStream];</span><br><span class="line">			fin.read(StoredChar, SizeOfStream);</span><br><span class="line">			fin.close();</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 文件的字节长度不少于16字节</span></span><br><span class="line">			<span class="keyword">if</span> (SizeOfStream &gt;= <span class="number">16</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">// 密文流长度不会超过明文流长度加16，再留一位记录填充量</span></span><br><span class="line">				<span class="keyword">char</span>* AESChar = <span class="keyword">new</span> <span class="keyword">char</span>[SizeOfStream + <span class="number">16</span> + <span class="number">1</span>];</span><br><span class="line">				<span class="comment">// 总加密轮数与明文字节数有关</span></span><br><span class="line">				<span class="keyword">int</span> TotalRounds = SizeOfStream / <span class="number">16</span> + <span class="number">1</span>;</span><br><span class="line">				<span class="comment">// 为临时矩阵注入字节和加载到密文流</span></span><br><span class="line">				<span class="keyword">for</span> (<span class="keyword">int</span> times = <span class="number">0</span>; times &lt; TotalRounds - <span class="number">1</span>; times++)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">16</span>; i++)</span><br><span class="line">					&#123;</span><br><span class="line">						TempMatrix[i] = (<span class="keyword">int</span>)StoredChar[i + <span class="number">16</span> * times];</span><br><span class="line">					&#125;</span><br><span class="line">					AESEncryption(TempMatrix, keyAfter);</span><br><span class="line">					<span class="comment">// 加载到密文流中去</span></span><br><span class="line">					<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">16</span>; i++)</span><br><span class="line">					&#123;</span><br><span class="line">						AESChar[i + <span class="number">16</span> * times] = (<span class="keyword">int</span>)TempMatrix[i];</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="comment">// 读到的最后字节块不满16个，开始填充					</span></span><br><span class="line">				<span class="comment">// 填充数量</span></span><br><span class="line">				<span class="keyword">int</span> NumberOfPad = <span class="number">0</span>;</span><br><span class="line">				<span class="keyword">if</span> (SizeOfStream % <span class="number">16</span> != <span class="number">0</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					NumberOfPad = <span class="number">16</span> - SizeOfStream % <span class="number">16</span>;</span><br><span class="line">					<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; SizeOfStream % <span class="number">16</span>; i++)</span><br><span class="line">					&#123;</span><br><span class="line">						TempMatrix[i] = (<span class="keyword">int</span>)StoredChar[i + SizeOfStream - SizeOfStream % <span class="number">16</span>];</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="comment">// 填充62</span></span><br><span class="line">					<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; NumberOfPad; i++)</span><br><span class="line">					&#123;</span><br><span class="line">						TempMatrix[i + SizeOfStream % <span class="number">16</span>] = <span class="number">62</span>;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="comment">// 开始加密</span></span><br><span class="line">					AESEncryption(TempMatrix, keyAfter);</span><br><span class="line">					<span class="comment">// 注入密文流</span></span><br><span class="line">					<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">16</span>; i++)</span><br><span class="line">					&#123;</span><br><span class="line">						AESChar[i + <span class="number">16</span> * (TotalRounds - <span class="number">1</span>)] = (<span class="keyword">int</span>)TempMatrix[i];</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="comment">// 密文后一位标志填充位数</span></span><br><span class="line">					AESChar[SizeOfStream + NumberOfPad] = (<span class="keyword">int</span>)NumberOfPad;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="comment">//写入文件</span></span><br><span class="line">				fout.write(AESChar, SizeOfStream + NumberOfPad + <span class="number">1</span>);</span><br><span class="line">				<span class="keyword">delete</span>[] AESChar;</span><br><span class="line">				fout.close();</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">// 文件长度在16以下</span></span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">// 长度为16加一位的</span></span><br><span class="line">				<span class="keyword">char</span>* AESChar = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">16</span> + <span class="number">1</span>];</span><br><span class="line">				<span class="keyword">int</span> NumberOfPad = <span class="number">16</span> - SizeOfStream % <span class="number">16</span>;</span><br><span class="line">				<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; SizeOfStream; i++)</span><br><span class="line">				&#123;</span><br><span class="line">					TempMatrix[i] = (<span class="keyword">int</span>)StoredChar[i];</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; NumberOfPad; i++)</span><br><span class="line">				&#123;</span><br><span class="line">					TempMatrix[i + SizeOfStream] = <span class="number">62</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="comment">// 开始加密</span></span><br><span class="line">				AESEncryption(TempMatrix, keyAfter);</span><br><span class="line">				<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)</span><br><span class="line">				&#123;</span><br><span class="line">					AESChar[i] = (<span class="keyword">int</span>)TempMatrix[i];</span><br><span class="line">				&#125;</span><br><span class="line">				fout.write(AESChar, <span class="number">16</span>);</span><br><span class="line">				<span class="keyword">delete</span>[] AESChar;</span><br><span class="line">				fout.close();</span><br><span class="line">			&#125;</span><br><span class="line">			fin.close();</span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; <span class="string">"Encryption to complete"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 文件的解密操作</span></span><br><span class="line"><span class="keyword">extern</span><span class="string">"C"</span> __declspec(dllexport) <span class="function"><span class="keyword">void</span> <span class="title">AESdocDecryption</span><span class="params">(<span class="keyword">char</span>* p, <span class="keyword">unsigned</span> <span class="keyword">char</span> Key[<span class="number">16</span>])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">char</span>* keyAfter = KeyExpansion(Key);</span><br><span class="line">	<span class="function">ifstream <span class="title">fin</span><span class="params">(p, ios::binary)</span></span>;</span><br><span class="line">	<span class="keyword">if</span> (fin.fail())<span class="comment">//打开源文件失败</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"Error 1: Fail to open the source file."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		fin.close();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"reading to complete"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="comment">// SizeOfStream储存密文文件的字节长度</span></span><br><span class="line">		fin.seekg(<span class="number">0</span>, ios::end);</span><br><span class="line">		<span class="keyword">long</span> SizeOfStream = fin.tellg();</span><br><span class="line">		fin.seekg(<span class="number">0</span>, ios::beg);</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"the size of the cipher text is "</span> &lt;&lt; SizeOfStream &lt;&lt; <span class="string">" bytes"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 创建一个写入文件储存明文</span></span><br><span class="line">		<span class="comment">// C语言的字符串真的难受</span></span><br><span class="line">		<span class="keyword">char</span> fileName[<span class="number">50</span>] ;</span><br><span class="line">	    <span class="built_in">strncpy</span>(fileName, p, <span class="built_in">strlen</span>(p) - <span class="built_in">strlen</span>(<span class="string">".crp"</span>));</span><br><span class="line">		fileName[<span class="built_in">strlen</span>(p) - <span class="built_in">strlen</span>(<span class="string">".crp"</span>)] = <span class="string">'\0'</span>;</span><br><span class="line">		<span class="function">ofstream <span class="title">fout</span><span class="params">(fileName, ios::binary)</span></span>;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">if</span> (fout.fail())<span class="comment">//创建文件失败</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; <span class="string">"Error 2: Fail to create the new file."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">			fout.close();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">// 文件中每16个字节进入一个临时4*4矩阵进行解密</span></span><br><span class="line">			<span class="comment">// 初始化这个容器</span></span><br><span class="line">			<span class="keyword">unsigned</span> <span class="keyword">char</span> TempMatrix[<span class="number">16</span>];</span><br><span class="line">			<span class="built_in">memset</span>(TempMatrix, <span class="number">0</span>, <span class="keyword">sizeof</span>(TempMatrix));</span><br><span class="line">			<span class="comment">// 整个密文文件读入内存</span></span><br><span class="line">			<span class="keyword">char</span>* StoredChar = <span class="keyword">new</span> <span class="keyword">char</span>[SizeOfStream];</span><br><span class="line">			fin.read(StoredChar, SizeOfStream);</span><br><span class="line">			<span class="comment">// 记录原明文长度</span></span><br><span class="line">			<span class="keyword">int</span> sizeOfClearText = SizeOfStream - <span class="number">1</span> - (<span class="keyword">int</span>)StoredChar[SizeOfStream - <span class="number">1</span>];</span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; <span class="string">"明文长度为"</span> &lt;&lt; dec &lt;&lt; sizeOfClearText &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">			fin.close();</span><br><span class="line"></span><br><span class="line">			<span class="comment">// 文件的字节长度不少于16字节</span></span><br><span class="line">			<span class="keyword">if</span> (SizeOfStream &gt;= <span class="number">16</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="comment">// 明文流</span></span><br><span class="line">				<span class="keyword">char</span>* AESDeChar = <span class="keyword">new</span> <span class="keyword">char</span>[SizeOfStream];</span><br><span class="line">				<span class="comment">// 总解密轮数与明文字节数有关</span></span><br><span class="line">				<span class="keyword">int</span> TotalRounds = sizeOfClearText / <span class="number">16</span>;</span><br><span class="line">				<span class="comment">// 为临时矩阵注入字节和加载到明文流</span></span><br><span class="line">				<span class="keyword">for</span> (<span class="keyword">int</span> times = <span class="number">0</span>; times &lt; TotalRounds + <span class="number">1</span>; times++)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">16</span>; i++)</span><br><span class="line">					&#123;</span><br><span class="line">						TempMatrix[i] = (<span class="keyword">int</span>)StoredChar[i + <span class="number">16</span> * times];</span><br><span class="line">					&#125;</span><br><span class="line">					AESDecryption(TempMatrix, keyAfter);</span><br><span class="line">					<span class="comment">// 加载到明文流中去</span></span><br><span class="line">					<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">16</span>; i++)</span><br><span class="line">					&#123;</span><br><span class="line">						AESDeChar[i + <span class="number">16</span> * times] = (<span class="keyword">int</span>)TempMatrix[i];</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="comment">//写入文件</span></span><br><span class="line">				fout.write(AESDeChar, sizeOfClearText);</span><br><span class="line">				<span class="keyword">delete</span>[] AESDeChar;</span><br><span class="line">				fout.close();</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">// 文件长度在16以下</span></span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">char</span>* AESDeChar = <span class="keyword">new</span> <span class="keyword">char</span>[sizeOfClearText];</span><br><span class="line">				<span class="comment">// 开始解密</span></span><br><span class="line">				AESDecryption(TempMatrix, keyAfter);</span><br><span class="line">				<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">16</span>; i++)</span><br><span class="line">				&#123;</span><br><span class="line">					AESDeChar[i] = (<span class="keyword">int</span>)TempMatrix[i];</span><br><span class="line">				&#125;</span><br><span class="line">				fout.write(AESDeChar, sizeOfClearText);</span><br><span class="line">				<span class="keyword">delete</span>[] AESDeChar;</span><br><span class="line">				fout.close();</span><br><span class="line">			&#125;</span><br><span class="line">			fin.close();</span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; <span class="string">"Decryption to complete"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Sid Wu</p>
  <div class="site-description" itemprop="description">我们穿越长城</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">32</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">30</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Sid Wu</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script>



  















  

  

</body>
</html>
